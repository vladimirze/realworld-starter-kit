(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},35:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),i=a.n(s),o=(a(33),a(3)),c=a(5),l=a(7),u=a(4),m=a(6),h=(a(35),a(45)),p=a(46),d=a(41),f=a(11),g=a(2),v=a(20),b=a(12),E=a(26),y={API_BASE_URL:"http://localhost:3000/api",DEFAULT_USER_IMAGE:"https://static.productionready.io/images/smiley-cyrus.jpg"},O=function(e){function t(e,a){var n,r;Object(o.a)(this,t);for(var s=arguments.length,i=new Array(s>2?s-2:0),c=2;c<s;c++)i[c-2]=arguments[c];return(r=Object(l.a)(this,(n=Object(u.a)(t)).call.apply(n,[this].concat(i)))).statusCode=e,r.response=a,r}return Object(m.a)(t,e),t}(Object(E.a)(Error));var N=[];var j=[];function k(e,t){var a=new AbortController,n={headers:{"Content-type":"application/json"},mode:"cors",signal:a.signal},r=Object.assign({},n,t);r=function(e){var t=Object(b.a)({},e);if(!t.headers||!t.headers["Content-type"])return e;switch(t.headers["Content-type"]){case"application/json":t.body=JSON.stringify(t.body)}return t}(r);var s,i="".concat(y.API_BASE_URL,"/").concat(e);if(N.length>0){var o=function(e,t){return N.reduce(function(e,t){var a=Object(v.a)(e,2);return t(a[0],a[1])},[e,t])}(i,r),c=Object(v.a)(o,2);i=c[0],r=c[1]}return i+=function(e){if(!e)return"";var t=Object.keys(e);return t.length>0?"?"+t.map(function(t){return"".concat(t,"=").concat(e[t])}).join("&"):""}(r.queryParameters),{promise:fetch(i,r).then(function(e){if(j.length>0)for(var t=0;t<j.length;t++){e=(0,j[t])(e)}return e}).then(function(e){return(s=e.clone()).json()}).catch(function(e){if("SyntaxError"===e.name)return{};throw e}).then(function(e){if(s.ok)return e;throw new O(s.status,e)}),abort:function(){a.abort()}}}var C,S=function(){function e(t){Object(o.a)(this,e),this.subscriptions=[],this.currentValue=t,this._isCurrentValueSet=arguments.length>0}return Object(c.a)(e,[{key:"subscribe",value:function(e){this.subscriptions.push(e),this._isCurrentValueSet&&e(this.currentValue)}},{key:"unsubscribe",value:function(e){var t=this.subscriptions.findIndex(function(t){return e===t});t>=0&&this.subscriptions.splice(t,1)}},{key:"notify",value:function(e){this.currentValue=e,this._isCurrentValueSet=!0;var t=!0,a=!1,n=void 0;try{for(var r,s=this.subscriptions[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){(0,r.value)(e)}}catch(i){a=!0,n=i}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}}}]),e}(),A={set:function(e){C=e,localStorage.setItem("conduit-jwt",e)},get:function(){return C||(C=localStorage.getItem("conduit-jwt"))},remove:function(){C=void 0,localStorage.removeItem("conduit-jwt")},isSet:function(){return null!==this.get()}},T={AUTHENTICATED:"authenticated",NOT_AUTHENTICATED:"not_authenticated",IN_PROGRESS:"in_progress"},U=new S,w=new S(A.isSet()?T.IN_PROGRESS:T.NOT_AUTHENTICATED);var P={getCurrentUser:function(){var e=k("user",{method:"GET"});return e.promise=e.promise.then(function(e){var t=e.user;return U.notify(t),w.notify(T.AUTHENTICATED),t}).catch(function(e){throw w.notify(T.NOT_AUTHENTICATED),e}),e},currentUser:U,authenticationStatus:w,register:function(e,t,a){return k("users",{method:"POST",body:{user:{username:e,email:t,password:a}}})},logIn:function(e,t){var a=k("users/login",{method:"POST",body:{user:{email:e,password:t}}});return a.promise=a.promise.then(function(e){return A.set(e.user.token),w.notify(T.AUTHENTICATED),U.notify(e.user),e}),a},logOut:function(){return A.remove(),P.authenticationStatus.notify(T.NOT_AUTHENTICATED),window.location.href="/",Promise.resolve(!0)},update:function(e){var t=k("user",{method:"PUT",body:{user:e}});return t.promise=t.promise.then(function(e){var t=e.user;return U.notify(t),t}),t}},R=P;var F=function(e){return r.a.createElement("div",null,!function(e){return!e.errors||0===Object.keys(e.errors).length}(e)&&r.a.createElement("ul",{className:"text-danger"},Object.keys(e.errors).map(function(t){return r.a.createElement("li",{key:t},t,": ",e.errors[t])})))},I=a(40),q=a(47),L={search:function(e,t,a){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).preserveQueryParams,r=void 0===n||n,s=new URLSearchParams(e.search),i={};if(r){var o=!0,c=!1,l=void 0;try{for(var u,m=s.keys()[Symbol.iterator]();!(o=(u=m.next()).done);o=!0){var h=u.value;i[h]=s.get(h)}}catch(p){c=!0,l=p}finally{try{o||null==m.return||m.return()}finally{if(c)throw l}}}return(t||e.pathname)+"?"+new URLSearchParams(Object.assign(i,a)).toString()},updateQueryParams:function(e,t,a,n){e.push(this.search(t,t.pathname,a,n))},getQueryParams:function(e){var t={};return new URLSearchParams(e.search).forEach(function(e,a){t[a]=e}),t},go:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];e.push.apply(e,a)}};function D(e){return Object(q.a)(function(e){return function(t){var a={search:L.search.bind(L,t.location),updateQueryParams:L.updateQueryParams.bind(L,t.history,t.location),queryParams:L.getQueryParams(t.location),go:L.go.bind(L,t.history)};return r.a.createElement(e,Object.assign({},t,{navigation:a}))}}(e))}var x=D(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:"",password:"",isBusy:!1,errors:{}},a.handleInputChange=a.handleInputChange.bind(Object(g.a)(a)),a.register=a.register.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"register",value:function(e){var t=this;e.preventDefault(),this.setState({isBusy:!0,errors:{}}),this.registrationRequest=R.register(this.state.username,this.state.email,this.state.password),this.registrationRequest.promise.then(function(){return t.loginRequest=R.logIn(t.state.email,t.state.password),t.loginRequest.promise}).then(function(){t.props.location.state&&t.props.location.state.from?t.props.navigation.go(t.props.location.state.from):t.props.navigation.go("/")}).catch(function(e){"AbortError"!==e.name&&(console.error(e),t.setState({isBusy:!1,errors:e.response.errors}))})}},{key:"handleInputChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"componentWillUnmount",value:function(){this.registrationRequest&&this.registrationRequest.abort(),this.loginRequest&&this.loginRequest.abort()}},{key:"render",value:function(){return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign Up"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(I.a,{to:"/login"},"Have an account?")),r.a.createElement("form",null,r.a.createElement(F,{errors:this.state.errors}),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username",name:"username",onChange:this.handleInputChange})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email",onChange:this.handleInputChange})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",onChange:this.handleInputChange,name:"password",placeholder:"Password"})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:this.state.isBusy,onClick:this.register},"Sign in"))))))}}]),t}(n.Component)),_=D(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",isBusy:!1,errors:{}},a.logIn=a.logIn.bind(Object(g.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"logIn",value:function(e){var t=this;e.preventDefault(),this.setState({isBusy:!0}),this.loginRequest=R.logIn(this.state.email,this.state.password),this.loginRequest.promise.then(function(){t.props.location.state&&t.props.location.state.from?t.props.navigation.go(t.props.location.state.from):t.props.navigation.go("/")}).catch(function(e){"AbortError"!==e.name&&(console.error(e),t.setState({isBusy:!1,errors:e.response.errors}))})}},{key:"handleInputChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"componentWillUnmount",value:function(){this.loginRequest&&this.loginRequest.abort()}},{key:"render",value:function(){return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign in"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(I.a,{to:"/register"},"Need an account?")),r.a.createElement("form",null,r.a.createElement(F,{errors:this.state.errors}),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email",onChange:this.handleInputChange})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",onChange:this.handleInputChange,name:"password",placeholder:"Password"})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:this.state.isBusy,onClick:this.logIn},"Sign in"))))))}}]),t}(n.Component)),B=a(43);function H(e){return function(t){function a(e){var t;return Object(o.a)(this,a),(t=Object(l.a)(this,Object(u.a)(a).call(this,e))).state={currentUser:{},authenticationStatus:T.IN_PROGRESS},t.onCurrentUserChange=t.onCurrentUserChange.bind(Object(g.a)(t)),t.onAuthentication=t.onAuthentication.bind(Object(g.a)(t)),t}return Object(m.a)(a,t),Object(c.a)(a,[{key:"onCurrentUserChange",value:function(e){this.setState({currentUser:e})}},{key:"onAuthentication",value:function(e){this.setState({authenticationStatus:e})}},{key:"componentDidMount",value:function(){R.currentUser.subscribe(this.onCurrentUserChange),R.authenticationStatus.subscribe(this.onAuthentication)}},{key:"componentWillUnmount",value:function(){R.currentUser.unsubscribe(this.onCurrentUserChange),R.authenticationStatus.unsubscribe(this.onAuthentication)}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{currentUser:this.state.currentUser,authenticationStatus:this.state.authenticationStatus}))}}]),a}(n.Component)}var Q=H(function(e){var t=e.authenticationStatus===T.AUTHENTICATED;return r.a.createElement("nav",{className:"navbar navbar-light"},r.a.createElement("div",{className:"container"},r.a.createElement(I.a,{className:"navbar-brand",to:"/"},"conduit"),r.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.a,{className:"nav-link",activeClassName:"active",exact:!0,to:"/"},"Home")),t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.a,{className:"nav-link",activeClassName:"active",to:"/editor"},r.a.createElement("i",{className:"ion-compose"}),"\xa0New Post")),t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.a,{className:"nav-link",activeClassName:"active",to:"/settings"},r.a.createElement("i",{className:"ion-gear-a"}),"\xa0Settings")),!t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.a,{className:"nav-link",activeClassName:"active",to:"/login"},"Sign in")),!t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.a,{className:"nav-link",activeClassName:"active",to:"/register"},"Sign up")),t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.a,{className:"nav-link",activeClassName:"active",to:"/@".concat(e.currentUser.username)},e.currentUser.username)))))}),G=H(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:a.getDefaultUserSettings()},a.handleInputChange=a.handleInputChange.bind(Object(g.a)(a)),a.updateSettings=a.updateSettings.bind(Object(g.a)(a)),a.logOut=a.logOut.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){var t=Object(b.a)({},this.state.user,Object(f.a)({},e.target.name,e.target.value));this.setState({user:t})}},{key:"updateSettings",value:function(e){e.preventDefault();var t=Object(b.a)({},this.state.user);0===t.password.length&&delete t.password,this.request=R.update(t),this.request.promise.catch(console.error)}},{key:"logOut",value:function(){R.logOut()}},{key:"getDefaultUserSettings",value:function(){return{image:this.props.currentUser.image||"",email:this.props.currentUser.email||"",bio:this.props.currentUser.bio||"",username:this.props.currentUser.username||"",password:""}}},{key:"componentDidUpdate",value:function(e){0===Object.keys(e.currentUser).length&&Object.keys(this.props.currentUser).length>0&&this.setState({user:this._getDefaultUserSettings()})}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){return r.a.createElement("div",{className:"settings-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Your Settings"),r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"URL of profile picture",name:"image",value:this.state.user.image,onChange:this.handleInputChange})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Your Name",name:"username",value:this.state.user.username,onChange:this.handleInputChange})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("textarea",{className:"form-control form-control-lg",rows:"8",placeholder:"Short bio about you",name:"bio",value:this.state.user.bio,onChange:this.handleInputChange})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email",value:this.state.user.email,onChange:this.handleInputChange})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",name:"password",value:this.state.user.password,onChange:this.handleInputChange})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",onClick:this.updateSettings},"Update Settings"))),r.a.createElement("hr",null),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:this.logOut},"Or click here to logout.")))))}}]),t}(n.Component)),M=a(19),W="articles";var z={getList:function(e){return k("".concat(W),{method:"GET",queryParameters:e})},get:function(e){return k("".concat(W,"/").concat(e),{method:"GET"})},update:function(e,t){return k("".concat(W,"/").concat(e),{method:"PUT",body:{article:t}})},create:function(e){return k("".concat(W),{method:"POST",body:{article:e}})},remove:function(e){return k("".concat(W,"/").concat(e),{method:"DELETE"})},favorite:function(e){return k("".concat(W,"/").concat(e,"/favorite"),{method:"POST"})},unfavorite:function(e){return k("".concat(W,"/").concat(e,"/favorite"),{method:"DELETE"})},isAuthor:function(e,t){return e.author.username===t.username}},V="articles/feed";var X=function(e){return k("".concat(V),{method:"GET",queryParameters:e})},J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onButtonClick=a.onButtonClick.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onButtonClick",value:function(){this.props.isFavorited?this.props.onUnfavorite(this.props.articleSlug):this.props.onFavorite(this.props.articleSlug)}},{key:"render",value:function(){return r.a.createElement("button",{className:"btn ".concat(this.props.className," ").concat(this.props.isFavorited?"btn-primary":"btn-outline-primary"),onClick:this.onButtonClick,disabled:this.props.isDisabled||!1},r.a.createElement("i",{className:"ion-heart"})," ",this.props.count)}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).favorite=a.favorite.bind(Object(g.a)(a)),a.unfavorite=a.unfavorite.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"favorite",value:function(e){this.favoriteRequest=z.favorite(e),this.favoriteRequest.promise.then(this.props.onFavorite).catch(console.error)}},{key:"unfavorite",value:function(e){this.unfavoriteRequest=z.unfavorite(e),this.unfavoriteRequest.promise.then(this.props.onUnfavorite).catch(console.error)}},{key:"componentWillUnmount",value:function(){[this.favoriteRequest,this.unfavoriteRequest].forEach(function(e){e&&e.abort()})}},{key:"render",value:function(){return r.a.createElement(J,Object.assign({},this.props,{onFavorite:this.favorite,onUnfavorite:this.unfavorite,isDisabled:this.props.authenticationStatus!==T.AUTHENTICATED}))}}]),t}(n.Component);Y=H(Y);var $={format:function(e){return new Date(e).toDateString()}};var K={getList:function(){return k("tags",{method:"GET"})}},Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onTagClick=a.onTagClick.bind(Object(g.a)(a)),a.onTagRemove=a.onTagRemove.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onTagClick",value:function(e){this.props.onTagClick&&this.props.onTagClick(e)}},{key:"onTagRemove",value:function(e,t){this.props.onTagRemove&&this.props.onTagRemove(e,t)}},{key:"render",value:function(){var e=this,t=void 0!==this.props.onTagClick?"u-cursor":"";return r.a.createElement("ul",{className:"tag-list"},this.props.tags.map(function(a,n){return r.a.createElement("li",{className:"tag-pill tag-default ".concat(t),key:"tag-".concat(n),onClick:function(){e.onTagClick(a)}},e.props.onTagRemove&&r.a.createElement("i",{className:"ion-close-round",onClick:function(){e.onTagRemove(a,n)}}),a)}))}}]),t}(n.Component),ee=function(e){return r.a.createElement(Z,{tags:e.tags})},te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={tags:[]},a.selectTag=a.selectTag.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"selectTag",value:function(e){this.props.onSelect(e)}},{key:"componentDidMount",value:function(){var e=this;this.request=K.getList(),this.request.promise.then(function(t){e.setState({tags:t.tags})}).catch(console.error)}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){return r.a.createElement(Z,{tags:this.state.tags,onTagClick:this.selectTag})}}]),t}(n.Component),ae={getCurrentPageNumber:function(e){var t=new URLSearchParams(e.search);return t.has("page")&&parseInt(t.get("page"))||1},getPageOffset:function(e,t){return(Number.isInteger(e)?e:this.getCurrentPageNumber(e))*t-t},getTotalPages:function(e,t){return Math.ceil(e/t)},goPage:function(e,t,a){L.updateQueryParams(e,t,{page:a})},paginate:function(e,t,a){for(var n=this.getCurrentPageNumber(e),s=[],i=function(e){s.push(r.a.createElement("li",{className:"u-cursor page-item ".concat(n===e?"active":""),key:e,onClick:function(){a(e)}},r.a.createElement("span",{className:"page-link"},e)))},o=1;o<=t;o+=1)i(o);return r.a.createElement("ul",{className:"pagination"},s)}};function ne(e,t){return function(a){function n(e){var a;return Object(o.a)(this,n),(a=Object(l.a)(this,Object(u.a)(n).call(this,e))).MAX_ITEMS_PER_PAGE=t.limit||10,a.defaultQueryParams=Object(b.a)({},t),a.props.tag&&(a.defaultQueryParams.tag=a.props.tag),a.state={feed:[],isReady:!1,totalArticles:0,totalPages:0},a.getFeed=a.getFeed.bind(Object(g.a)(a)),a.handleLikeButton=a.handleLikeButton.bind(Object(g.a)(a)),a.updatePageQueryParam=a.updatePageQueryParam.bind(Object(g.a)(a)),a}return Object(m.a)(n,a),Object(c.a)(n,[{key:"getFeed",value:function(){var t=this;this.setState({isReady:!1});var a=Object.assign({},this.defaultQueryParams,{limit:this.MAX_ITEMS_PER_PAGE,offset:ae.getPageOffset(this.props.location,this.MAX_ITEMS_PER_PAGE)});this.feedRequest=e(a),this.feedRequest.promise.then(function(e){t.setState({feed:e.articles,isReady:!0,totalArticles:e.articlesCount,totalPages:ae.getTotalPages(e.articlesCount,t.MAX_ITEMS_PER_PAGE)})}).catch(function(e){"AbortError"!==e.name&&(console.error(e),t.setState({isReady:!1}))})}},{key:"handleLikeButton",value:function(e){var t=e.article.slug,a=this.state.feed.findIndex(function(e){return e.slug===t});if(-1!==a){var n=Object(b.a)({},this.state.feed[a]),r=Object(M.a)(this.state.feed);n.favorited=!n.favorited,n.favoritesCount=n.favorited?n.favoritesCount+1:n.favoritesCount-1,r.splice(a,1,n),this.setState({feed:r})}}},{key:"updatePageQueryParam",value:function(e){ae.goPage(this.props.history,this.props.location,e)}},{key:"componentDidMount",value:function(){this.getFeed()}},{key:"componentDidUpdate",value:function(e){e.navigation.queryParams.page!==this.props.navigation.queryParams.page&&this.getFeed()}},{key:"componentWillUnmount",value:function(){for(var e=[this.feedRequest,this.favoriteRequest,this.unfavoriteRequest],t=0;t<e.length;t++){var a=e[t];a&&a.abort()}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,!this.state.isReady&&r.a.createElement("div",null,"Loading articles..."),this.state.isReady&&0===this.state.feed.length&&r.a.createElement("div",null,"No articles are here... yet."),this.state.isReady&&this.state.feed.length>0&&this.state.feed.map(function(t){return r.a.createElement("div",{className:"article-preview",key:t.createdAt},r.a.createElement("div",{className:"article-meta"},r.a.createElement(I.a,{to:"/@".concat(t.author.username)},r.a.createElement("img",{src:t.author.image,alt:t.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(I.a,{to:"/@".concat(t.author.username),className:"author"},t.author.username),r.a.createElement("span",{className:"date"},$.format(t.createdAt))),r.a.createElement(Y,{className:"btn-sm pull-xs-right",articleSlug:t.slug,count:t.favoritesCount,isFavorited:t.favorited,onFavorite:e.handleLikeButton,onUnfavorite:e.handleLikeButton})),r.a.createElement(I.a,{to:"/article/".concat(t.slug),className:"preview-link"},r.a.createElement("h1",null,t.title),r.a.createElement("p",null,t.description),r.a.createElement("span",null,"Read more..."),r.a.createElement(ee,{tags:t.tagList})))}),ae.paginate(this.props.location,this.state.totalPages,this.updatePageQueryParam))}}]),n}(n.Component)}var re=D(ne(z.getList,{})),se=D(ne(X,{})),ie=D(ne(z.getList,{})),oe=function(e){return D(ne(z.getList,{favorited:e,limit:5}))},ce={GLOBAL:"global",PERSONAL:"personal",TAG:"tag",NONE:"none"},le=H(D(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={selectedFeed:ce.NONE},a.updateTagQueryParam=a.updateTagQueryParam.bind(Object(g.a)(a)),a.handleQueryParams=a.handleQueryParams.bind(Object(g.a)(a)),a.getDefaultFeed=a.getDefaultFeed.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getDefaultFeed",value:function(){switch(this.props.authenticationStatus){case T.AUTHENTICATED:return ce.PERSONAL;case T.NOT_AUTHENTICATED:return ce.GLOBAL;default:return ce.NONE}}},{key:"handleQueryParams",value:function(){var e=this.props.navigation.queryParams,t=e.feed,a=e.tag;t&&ce.hasOwnProperty(t.toUpperCase())?(t===ce.PERSONAL&&this.props.authenticationStatus!==T.AUTHENTICATED&&this.props.navigation.go("/login",{state:{from:this.props.location}}),this.setState({selectedFeed:t})):a?this.setState({selectedFeed:ce.TAG,tag:a}):this.setState({selectedFeed:this.getDefaultFeed()})}},{key:"updateTagQueryParam",value:function(e){this.props.navigation.updateQueryParams({tag:e},{preserveQueryParams:!1})}},{key:"ifTagThen",value:function(e,t){return e===this.state.selectedFeed?t:""}},{key:"componentDidUpdate",value:function(e){e.authenticationStatus===this.props.authenticationStatus&&e.location.search===this.props.location.search||this.handleQueryParams()}},{key:"render",value:function(){return r.a.createElement("div",{className:"home-page"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"logo-font"},"conduit"),r.a.createElement("p",null,"A place to share your knowledge."))),r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"feed-toggle"},r.a.createElement("ul",{className:"nav nav-pills outline-active"},this.props.authenticationStatus===T.AUTHENTICATED&&r.a.createElement("li",{className:"nav-item u-cursor"},r.a.createElement(I.a,{to:"?feed=personal",className:"nav-link ".concat(this.ifTagThen(ce.PERSONAL,"active"))},"Your Feed")),r.a.createElement("li",{className:"nav-item u-cursor"},r.a.createElement(I.a,{to:"/?feed=global",className:"nav-link ".concat(this.ifTagThen(ce.GLOBAL,"active"))},"Global Feed")),this.state.selectedFeed===ce.TAG&&r.a.createElement("li",{className:"nav-item u-cursor"},r.a.createElement(I.a,{to:"?tag=".concat(this.state.tag),className:"nav-link ".concat(this.ifTagThen(ce.TAG,"active"))},r.a.createElement("i",{className:"ion-pound"}),this.state.tag)))),this.state.selectedFeed===ce.GLOBAL&&r.a.createElement(re,null),this.state.selectedFeed===ce.PERSONAL&&r.a.createElement(se,null),this.state.selectedFeed===ce.TAG&&r.a.createElement(ie,{key:this.state.tag,tag:this.state.tag})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("p",null,"Popular Tags"),r.a.createElement(te,{onSelect:this.updateTagQueryParam}))))))}}]),t}(n.Component)));var ue={get:function(e){var t=k("profiles/".concat(e),{method:"GET"});return t.promise=t.promise.then(function(e){return e.profile}),t},follow:function(e){return k("profiles/".concat(e,"/follow"),{method:"POST"})},unfollow:function(e){return k("profiles/".concat(e,"/follow"),{method:"DELETE"})}},me=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onButtonClick=a.onButtonClick.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onButtonClick",value:function(){this.props.isFollowing?this.props.onUnfollow():this.props.onFollow()}},{key:"render",value:function(){var e=this.props.isFollowing?"btn-secondary":"btn-outline-secondary";return r.a.createElement("button",{className:"btn btn-sm ".concat(e," ").concat(this.props.className),onClick:this.onButtonClick,disabled:this.props.isDisabled},r.a.createElement("i",{className:"ion-plus-round"}),"\xa0",this.props.isFollowing?"Unfollow":"Follow"," ",this.props.subject)}}]),t}(n.Component),he=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isBusy:!1},a.follow=a.follow.bind(Object(g.a)(a)),a.unfollow=a.unfollow.bind(Object(g.a)(a)),a.makeRequest=a.makeRequest.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"follow",value:function(){this.makeRequest(ue.follow,this.props.onFollow)}},{key:"unfollow",value:function(){this.makeRequest(ue.unfollow,this.props.onUnfollow)}},{key:"makeRequest",value:function(e,t){var a=this;this.setState({isBusy:!0}),this.request=e(this.props.profile.username),this.request.promise.then(function(){a.setState({isBusy:!1}),t()}).catch(function(e){"AbortError"!==e.name&&a.setState({isBusy:!1})})}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){return r.a.createElement(me,{isFollowing:this.props.profile.following,onUnfollow:this.unfollow,onFollow:this.follow,subject:this.props.profile.username,isDisabled:this.props.authenticationStatus!==T.AUTHENTICATED})}}]),t}(n.Component);he=H(he);var pe=function(e){return r.a.createElement(n.Fragment,null,e.isShown&&r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement("div",{className:"alert alert-warning",role:"alert"},"Not Found")))),!e.isShown&&e.children)},de={AUTHOR_ARTICLES:"Author articles",AUTHOR_FAVORITES:"Author favorites"},fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={profile:{},selectedFeed:a.getSelectedFeedFromQueryParams(),AuthorFeed:void 0,FavoritedArticlesFeed:void 0,isUserProfileNotFound:!1},a.getUserProfile=a.getUserProfile.bind(Object(g.a)(a)),a.prepareUserProfilePage=a.prepareUserProfilePage.bind(Object(g.a)(a)),a.getSelectedFeedFromQueryParams=a.getSelectedFeedFromQueryParams.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getSelectedFeedFromQueryParams",value:function(){var e=new URLSearchParams(this.props.location.search).get("feed");return e&&de.hasOwnProperty(e.toUpperCase())?de[e.toUpperCase()]:de.AUTHOR_ARTICLES}},{key:"isOwner",value:function(){return this.props.currentUser.username===this.props.match.params.user}},{key:"ifFeedThen",value:function(e,t){return this.state.selectedFeed===e?t:""}},{key:"prepareUserProfilePage",value:function(){var e=this;this.getUserProfile().then(function(t){e.getUserFeed(t)})}},{key:"getUserProfile",value:function(){var e=this;return this.request=ue.get(this.props.match.params.user),this.request.promise=this.request.promise.then(function(t){return e.setState({profile:t}),t}).catch(function(t){404===t.statusCode&&e.setState({isUserProfileNotFound:!0})}),this.request.promise}},{key:"getUserFeed",value:function(e){var t;this.setState({AuthorFeed:(t=e.username,D(ne(z.getList,{author:t,limit:5}))),FavoritedArticlesFeed:oe(e.username)})}},{key:"componentDidMount",value:function(){this.prepareUserProfilePage()}},{key:"componentDidUpdate",value:function(e){e.match.params.user!==this.props.match.params.user?this.prepareUserProfilePage():e.location.search!==this.props.location.search&&this.setState({selectedFeed:this.getSelectedFeedFromQueryParams()})}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){return r.a.createElement(pe,{isShown:this.state.isUserProfileNotFound},r.a.createElement("div",{className:"profile-page"},r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("img",{src:this.state.profile.image,className:"user-img",alt:"".concat(this.state.profile.username," avatar")}),r.a.createElement("h4",null,this.state.profile.username),r.a.createElement("p",null,this.state.profile.bio),this.isOwner()&&r.a.createElement(I.a,{to:"/settings",className:"btn btn-sm btn-outline-secondary action-btn"},r.a.createElement("i",{className:"ion-gear-a"})," Edit Profile Settings"),!this.isOwner()&&r.a.createElement(he,{className:"action-btn",profile:this.state.profile,onFollow:this.getUserProfile,onUnfollow:this.getUserProfile}))))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("div",{className:"articles-toggle"},r.a.createElement("ul",{className:"nav nav-pills outline-active"},r.a.createElement("li",{className:"nav-item u-cursor"},r.a.createElement(I.a,{to:{search:"?feed=author_articles"},className:"nav-link ".concat(this.ifFeedThen(de.AUTHOR_ARTICLES,"active"))},"My Articles")),r.a.createElement("li",{className:"nav-item u-cursor"},r.a.createElement(I.a,{to:{search:"?feed=author_favorites"},className:"nav-link ".concat(this.ifFeedThen(de.AUTHOR_FAVORITES,"active"))},"Favorited Articles")))),this.state.profile.username&&this.state.selectedFeed===de.AUTHOR_ARTICLES&&this.state.AuthorFeed&&r.a.createElement(this.state.AuthorFeed,null),this.state.profile.username&&this.state.selectedFeed===de.AUTHOR_FAVORITES&&this.state.FavoritedArticlesFeed&&r.a.createElement(this.state.FavoritedArticlesFeed,null))))))}}]),t}(n.Component),ge=D(H(fe)),ve=a(25),be=a.n(ve);var Ee={create:function(e,t){return k("articles/".concat(e,"/comments"),{method:"POST",body:{comment:{body:t}}})},getList:function(e){return k("articles/".concat(e,"/comments"),{method:"GET"})},remove:function(e,t){return k("articles/".concat(e,"/comments/").concat(t),{method:"DELETE"})},isAuthor:function(e,t){return e.username===t.author.username}},ye=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(I.a,{to:"/@".concat(e.author.username),className:"comment-author"},r.a.createElement("img",{src:e.author.image||y.DEFAULT_USER_IMAGE,className:"comment-author-img",alt:"".concat(e.author.username)})),"\xa0",r.a.createElement(I.a,{to:"/@".concat(e.author.username),className:"comment-author"},e.author.username))},Oe=H(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={comment:""},a.handleInput=a.handleInput.bind(Object(g.a)(a)),a.postComment=a.postComment.bind(Object(g.a)(a)),a.resetInput=a.resetInput.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleInput",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"resetInput",value:function(){this.setState({comment:""})}},{key:"postComment",value:function(e){var t=this;e.preventDefault(),this.request=Ee.create(this.props.articleSlug,this.state.comment),this.request.promise.then(function(){t.resetInput(),t.props.onPostSuccess()}).catch(console.error)}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){return r.a.createElement("form",{className:"card comment-form"},r.a.createElement("div",{className:"card-block"},r.a.createElement("textarea",{className:"form-control",placeholder:"Write a comment...",rows:"3",value:this.state.comment,name:"comment",onChange:this.handleInput})),r.a.createElement("div",{className:"card-footer"},r.a.createElement(ye,{author:this.props.currentUser}),r.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.postComment},"Post Comment")))}}]),t}(n.Component)),Ne=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isReady:!0},a.remove=a.remove.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"remove",value:function(){var e=this;this.setState({isReady:!1}),this.request=this.props.onRemove(this.props.comment.id),this.request.promise.catch(function(t){console.error(t),"AbortError"!==t.name&&e.setState({isReady:!0})})}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){return r.a.createElement("div",{className:"card",key:this.props.comment.id},r.a.createElement("div",{className:"card-block"},r.a.createElement("p",{className:"card-text"},this.props.comment.body)),r.a.createElement("div",{className:"card-footer"},r.a.createElement(ye,{author:this.props.comment.author}),r.a.createElement("span",{className:"date-posted"},$.format(this.props.comment.createdAt)),this.props.isAuthor&&r.a.createElement("span",{className:"mod-options"},r.a.createElement("i",{className:"ion-trash-a",onClick:this.remove}))))}}]),t}(n.Component),je=H(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={comments:[],isReady:!1},a.removeComment=a.removeComment.bind(Object(g.a)(a)),a.isCommentAuthor=a.isCommentAuthor.bind(Object(g.a)(a)),a.getComments=a.getComments.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getComments",value:function(){var e=this;this.setState({isReady:!1}),this.request=Ee.getList(this.props.articleSlug),this.request.promise.then(function(t){e.setState({comments:t.comments,isReady:!0})}).catch(function(t){"AbortError"!==t.name&&e.setState({isReady:!0})})}},{key:"removeComment",value:function(e){return this.request=Ee.remove(this.props.articleSlug,e),this.request.promise.then(this.getComments).catch(console.error),this.request}},{key:"isCommentAuthor",value:function(e){return Ee.isAuthor(this.props.currentUser,e)}},{key:"componentDidMount",value:function(){this.getComments()}},{key:"componentWillUnmount",value:function(){this.request.abort()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,!this.state.isReady&&r.a.createElement("div",null,"loading..."),this.state.isReady&&this.props.authenticationStatus===T.AUTHENTICATED&&r.a.createElement(Oe,{articleSlug:this.props.articleSlug,onPostSuccess:this.getComments,author:this.props.currentUser}),this.state.isReady&&this.state.comments.map(function(t){return r.a.createElement(Ne,{comment:t,onRemove:e.removeComment,isAuthor:e.isCommentAuthor(t),key:t.id})}))}}]),t}(n.Component)),ke=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(I.a,{to:"/@".concat(e.article.author.username)},r.a.createElement("img",{src:e.article.author.image,alt:e.article.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(I.a,{to:"/@".concat(e.article.author.username),className:"author"},e.article.author.username),r.a.createElement("span",{className:"date"},$.format(e.article.createdAt))))},Ce=D(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFollowClick=a.handleFollowClick.bind(Object(g.a)(a)),a.favorite=a.favorite.bind(Object(g.a)(a)),a.unfavorite=a.unfavorite.bind(Object(g.a)(a)),a.deleteArticle=a.deleteArticle.bind(Object(g.a)(a)),a.isAuthor=a.isAuthor.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"favorite",value:function(){var e=Object.assign({},this.props.article,{favorited:!0,favoritesCount:this.props.article.favoritesCount+1});this.props.onArticleChange(e)}},{key:"unfavorite",value:function(){var e=Object.assign({},this.props.article,{favorited:!1,favoritesCount:this.props.article.favoritesCount-1});this.props.onArticleChange(e)}},{key:"handleFollowClick",value:function(e){var t=Object.assign({},this.props.article.author,{following:e}),a=Object.assign({},this.props.article);a.author=t,this.props.onArticleChange(a)}},{key:"deleteArticle",value:function(){var e=this;this.request=z.remove(this.props.match.params.slug),this.request.promise.then(function(){e.props.navigation.go("/")}).catch(console.error)}},{key:"isAuthor",value:function(){return z.isAuthor(this.props.article,this.props.currentUser)}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"article-meta"},r.a.createElement(ke,{article:this.props.article}),this.isAuthor()&&r.a.createElement(I.a,{to:"/editor/".concat(this.props.article.slug),className:"btn btn-sm btn-outline-secondary"},r.a.createElement("i",{className:"ion-edit"})," Edit Article"),"\xa0\xa0",this.isAuthor()&&r.a.createElement("button",{onClick:this.deleteArticle,className:"btn btn-sm btn-outline-danger"},r.a.createElement("i",{className:"ion-trash-a"})," Delete Article"),!this.isAuthor()&&r.a.createElement(he,{className:"action-btn",profile:this.props.article.author,onFollow:function(){e.handleFollowClick(!0)},onUnfollow:function(){e.handleFollowClick(!1)}}),"\xa0\xa0",!this.isAuthor()&&r.a.createElement(Y,{className:"btn-sm",articleSlug:this.props.article.slug,count:this.props.article.favoritesCount,isFavorited:this.props.article.favorited,onFavorite:this.favorite,onUnfavorite:this.unfavorite}))}}]),t}(n.Component)),Se=D(H(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isReady:!1,isArticleNotFound:!1},a.updateArticle=a.updateArticle.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"updateArticle",value:function(e){this.setState({article:e})}},{key:"componentDidMount",value:function(){var e=this;this.request=z.get(this.props.match.params.slug),this.request.promise.then(function(t){e.setState({article:t.article,isReady:!0})}).catch(function(t){"AbortError"!==t.name&&(404===t.statusCode&&e.setState({isArticleNotFound:!0}),console.error(t))})}},{key:"componentWillUnmount",value:function(){this.request.abort()}},{key:"render",value:function(){return r.a.createElement(pe,{isShown:this.state.isArticleNotFound},!this.state.isReady&&r.a.createElement("div",null,"Loading..."),this.state.article&&r.a.createElement("div",{className:"article-page"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,this.state.article.title),r.a.createElement(Ce,{article:this.state.article,onArticleChange:this.updateArticle,currentUser:this.props.currentUser}))),r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row article-content"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("p",{dangerouslySetInnerHTML:{__html:be()(this.state.article.body,{sanitize:!0})}}))),r.a.createElement(ee,{tags:this.state.article.tagList}),r.a.createElement("hr",null),r.a.createElement("div",{className:"article-actions"},r.a.createElement(Ce,{article:this.state.article,onArticleChange:this.updateArticle,currentUser:this.props.currentUser})),this.props.authenticationStatus!==T.AUTHENTICATED&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},r.a.createElement("p",null,r.a.createElement(I.a,{to:{pathname:"/login",state:{from:this.props.location}}},"Sign in"),"\xa0 or \xa0",r.a.createElement(I.a,{to:{pathname:"/register",state:{from:this.props.location}}},"sign up")," to add comments on this article."))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},r.a.createElement(je,{articleSlug:this.state.article.slug}))))))}}]),t}(n.Component))),Ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={article:{title:a.props.title||"",description:a.props.description||[],body:a.props.body||"",tagList:a.props.tagList||[]}},a.onSubmit=a.onSubmit.bind(Object(g.a)(a)),a.handleInput=a.handleInput.bind(Object(g.a)(a)),a.handleTagInput=a.handleTagInput.bind(Object(g.a)(a)),a.getSanitizedTagList=a.getSanitizedTagList.bind(Object(g.a)(a)),a.removeTag=a.removeTag.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(Object(b.a)({},this.state.article,{tagList:this.getSanitizedTagList()}))}},{key:"handleInput",value:function(e){var t=Object(b.a)({},this.state.article,Object(f.a)({},e.target.name,e.target.value));this.setState({article:t})}},{key:"handleTagInput",value:function(e){var t=e.target.value.split(" ");this.setState({article:Object.assign({},this.state.article,Object(f.a)({},e.target.name,t))})}},{key:"getSanitizedTagList",value:function(){return this.state.article.tagList.filter(function(e){return e.length>0})}},{key:"removeTag",value:function(e){var t=this.state.article.tagList.findIndex(function(t){return t===e}),a=Object(M.a)(this.state.article.tagList);a.splice(t,1),this.setState({article:Object.assign({},this.state.article,{tagList:a})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"editor-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Article Title",value:this.state.article.title,name:"title",onChange:this.handleInput})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"What's this article about?",value:this.state.article.description,name:"description",onChange:this.handleInput})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",rows:"8",placeholder:"Write your article (in markdown)",value:this.state.article.body,name:"body",onChange:this.handleInput})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter tags separated by space",value:this.state.article.tagList.join(" "),name:"tagList",onChange:this.handleTagInput}),r.a.createElement(Z,{tags:this.getSanitizedTagList(),onTagRemove:this.removeTag})),r.a.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",type:"button",onClick:this.onSubmit},"Publish Article")))))))}}]),t}(n.Component);var Te,Ue=function(e,t,a){return D(H(function(n){function s(e){var t;return Object(o.a)(this,s),(t=Object(l.a)(this,Object(u.a)(s).call(this,e))).state={isAuthorized:!1,isReady:!1,isErrorHappened:!1,resolved:{},isNotFoundError:!1},t}return Object(m.a)(s,n),Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.request=t(this.props.match),this.request.promise.then(function(t){e.setState({isAuthorized:a(e.props.currentUser,t),isReady:!0,resolved:t})}).catch(function(t){"AbortError"!==t.name&&(404===t.statusCode?e.setState({isNotFoundError:!0}):e.setState({isErrorHappened:!0,error:t}))})}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){return r.a.createElement(pe,{isShown:this.state.isNotFoundError},this.state.isReady&&this.state.isAuthorized&&r.a.createElement(e,Object.assign({},this.props,{resolved:this.state.resolved})),this.state.isReady&&!this.state.isAuthorized&&r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement("div",{className:"alert alert-warning",role:"alert"},"Not Authorized")))),this.state.isReady&&this.state.isErrorHappened&&r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},"An error occurred:",r.a.createElement("div",{className:"alert alert-danger",role:"alert"},r.a.createElement(F,{errors:this.state.errors}))))))}}]),s}(n.Component)))}(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={article:Object(b.a)({},a.props.resolved.article)},a.saveChanges=a.saveChanges.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"saveChanges",value:function(e){var t=this;this.articleRequest=z.update(this.state.article.slug,e),this.articleRequest.promise.then(function(e){t.props.navigation.go("/article/".concat(e.article.slug))}).catch(console.error)}},{key:"componentWillUnmount",value:function(){this.articleRequest&&this.articleRequest.abort()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.state.article&&r.a.createElement(Ae,{title:this.state.article.title,body:this.state.article.body,description:this.state.article.description,tagList:this.state.article.tagList,onSubmit:this.saveChanges}))}}]),t}(n.Component),function(e){return z.get(e.params.slug)},function(e,t){return e.username===t.article.author.username}),we=D(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).create=a.create.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"create",value:function(e){var t=this;this.request=z.create(e),this.request.promise.then(function(e){t.props.navigation.go("/article/".concat(e.article.slug))}).catch(console.error)}},{key:"componentWillUnmount",value:function(){this.request&&this.request.abort()}},{key:"render",value:function(){return r.a.createElement(Ae,{onSubmit:this.create})}}]),t}(n.Component)),Pe=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement(I.a,{to:"/",className:"logo-font"},"conduit"),r.a.createElement("span",{className:"attribution"},"An interactive learning project from",r.a.createElement("a",{href:"https://thinkster.io"},"Thinkster"),". Code & design licensed under MIT.")))},Re=a(27),Fe=a(44),Ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).isAuthenticatedUser=a.isAuthenticatedUser.bind(Object(g.a)(a)),a.isAnonymousUser=a.isAnonymousUser.bind(Object(g.a)(a)),a.isUserLoading=a.isUserLoading.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"isUserLoading",value:function(){return this.props.authenticationStatus===T.IN_PROGRESS}},{key:"isAuthenticatedUser",value:function(){return this.props.authenticationStatus===T.AUTHENTICATED}},{key:"isAnonymousUser",value:function(){return this.props.authenticationStatus===T.NOT_AUTHENTICATED}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,s=Object(Re.a)(t,["component"]);return r.a.createElement(n.Fragment,null,this.isUserLoading()&&r.a.createElement("span",null,"Route is loading..."),r.a.createElement(d.a,Object.assign({},s,{render:function(t){return r.a.createElement(n.Fragment,null,e.isAuthenticatedUser()&&r.a.createElement(a,t),e.isAnonymousUser()&&r.a.createElement(Fe.a,{to:{pathname:"/login",state:{from:t.location}}}))}})))}}]),t}(n.Component),qe=Ie=H(Ie);Te=function(e,t){var a=A.get();return a&&(t.headers.Authorization="Token ".concat(a)),[e,t]},N.push(Te);var Le=H(function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){A.isSet()&&R.getCurrentUser()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(Q,null),r.a.createElement(p.a,null,r.a.createElement(d.a,{path:"/",exact:!0,component:le}),r.a.createElement(d.a,{path:"/register",component:x}),r.a.createElement(d.a,{path:"/login",component:_}),r.a.createElement(d.a,{path:"/@:user",component:ge}),r.a.createElement(qe,{path:"/editor/:slug",component:Ue}),r.a.createElement(qe,{path:"/editor",component:we}),r.a.createElement(d.a,{path:"/article/:slug",component:Se}),r.a.createElement(qe,{path:"/settings",component:G})),r.a.createElement(Pe,null))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.140cfd99.chunk.js.map