{"version":3,"sources":["config.js","services/request.js","services/jwt.js","services/Observable.js","api/user.js","components/ErrorViewer.js","services/navigation.js","hoc/withNavigation.js","pages/Registration.js","pages/LogIn.js","hoc/withAuthenticatedUser.js","components/Navigation.js","pages/ProfileSettings.js","api/article.js","api/feed.js","components/LikeButton.js","services/representator.js","api/tag.js","components/TagList.js","services/pagination.js","components/feed.js","pages/Home.js","api/profile.js","components/FollowButton.js","components/NotFound404.js","pages/UserProfile.js","api/comment.js","components/CommentAuthor.js","components/CommentEditor.js","components/CommentViewer.js","components/CommentList.js","components/ArticleAuthor.js","pages/ArticleViewer.js","components/ArticleForm.js","pages/ArticleEditor.js","hoc/withAuthorizationCheck.js","pages/ArticleCreator.js","components/Footer.js","components/ProtectedRoute.js","App.js","serviceWorker.js","index.js"],"names":["config","API_BASE_URL","DEFAULT_USER_IMAGE","APIError","_Error","statusCode","response","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","params","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","inherits","wrapNativeSuper","Error","interceptors","responseInterceptors","request","resource","options","abortController","AbortController","defaultOptions","headers","Content-type","mode","signal","requestOptions","assign","objectSpread","body","JSON","stringify","prepareBody","responseClone","requestUrl","_applyRequestIntercep","reduce","interceptor","_request","slicedToArray","applyRequestInterceptors","_applyRequestIntercep2","queryParameters","parameters","keys","map","key","join","prepareQueryParameters","promise","fetch","then","_i","clone","json","catch","error","name","ok","status","abort","token","Observable","value","subscriptions","currentValue","_isCurrentValueSet","observer","push","index","findIndex","subscription","splice","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","err","return","jwt","set","localStorage","setItem","get","getItem","remove","removeItem","isSet","authenticationStatusEnum","AUTHENTICATED","NOT_AUTHENTICATED","IN_PROGRESS","currentUser","authenticationStatus","userResource","getCurrentUser","req","method","authenticatedUser","user","notify","register","username","email","password","logIn","logOut","window","location","href","Promise","resolve","update","updatedUser","ErrorViewer","props","react_default","a","createElement","errors","isEmptyObject","className","errorKey","navigation","search","toPath","queryParams","_ref$preserveQueryPar","preserveQueryParams","currentQueryParams","URLSearchParams","updatedQueryParams","pathname","toString","updateQueryParams","history","queryParam","getQueryParams","forEach","go","args","withNavigation","WrappedComponent","withRouter","boundNavigation","bind","provideNavigation","Registration","state","isBusy","handleInputChange","assertThisInitialized","event","_this2","preventDefault","setState","registrationRequest","loginRequest","from","console","defineProperty","target","Link","to","ErrorViewer_ErrorViewer","type","placeholder","onChange","disabled","onClick","Component","LogIn","withAuthenticatedUser","_Component","AuthenticatedUserHoc","onCurrentUserChange","onAuthentication","createClass","subscribe","unsubscribe","isAuthenticated","NavLink","activeClassName","exact","ProfileSettings","getDefaultUserSettings","updateSettings","image","bio","prevProps","_getDefaultUserSettings","rows","articleResource","getList","slug","changes","article","create","favorite","unfavorite","isAuthor","author","feedResource","LikeButton","onButtonClick","isFavorited","onUnfavorite","articleSlug","onFavorite","isDisabled","count","ArticleLikeButton","favoriteRequest","unfavoriteRequest","LikeButton_LikeButton","date","format","isoDate","Date","toDateString","tagResource","TagList","onTagClick","onTagRemove","tag","cursorClass","tags","ArticleTags","TagList_TagList","PopularTags","_Component2","_this3","selectTag","onSelect","_this4","pagination","getCurrentPageNumber","searchParams","has","parseInt","getPageOffset","pageNumberOrLocation","maxItemsPerPage","Number","isInteger","getTotalPages","itemCount","Math","ceil","goPage","page","paginate","totalPages","onPageClick","pageNumber","pages","_loop","i","feedFactory","dataSource","Feed","MAX_ITEMS_PER_PAGE","limit","defaultQueryParams","feed","isReady","totalArticles","getFeed","handleLikeButton","updatePageQueryParam","offset","feedRequest","articles","articlesCount","toConsumableArray","favorited","favoritesCount","_arr","createdAt","src","alt","LikeButton_ArticleLikeButton","title","description","TagList_ArticleTags","tagList","GlobalFeed","PersonalFeed","TagFeed","favoritedArticlesFeedFactory","feedChoice","GLOBAL","PERSONAL","TAG","NONE","HomePage","selectedFeed","updateTagQueryParam","handleQueryParams","getDefaultFeed","_this$props$navigatio","hasOwnProperty","toUpperCase","ifTagThen","TagList_PopularTags","profileResource","profile","follow","unfollow","FollowButton","isFollowing","onUnfollow","onFollow","buttonStyle","subject","FollowUserButton","makeRequest","requestFn","callbackFn","FollowButton_FollowButton","following","NotFound404","react","isShown","role","children","AUTHOR_ARTICLES","AUTHOR_FAVORITES","UserProfile","getSelectedFeedFromQueryParams","AuthorFeed","FavoritedArticlesFeed","isUserProfileNotFound","getUserProfile","prepareUserProfilePage","match","getUserFeed","components_NotFound404","isOwner","FollowButton_FollowUserButton","ifFeedThen","commentResource","comment","commentId","CommentAuthor","CommentEditor","handleInput","postComment","resetInput","onPostSuccess","components_CommentAuthor","CommentViewer","onRemove","id","CommentList","comments","removeComment","isCommentAuthor","getComments","components_CommentEditor","CommentViewer_CommentViewer","ArticleAuthor","ArticleMeta","BaseArticleMeta","handleFollowClick","deleteArticle","updatedArticle","onArticleChange","components_ArticleAuthor","ArticleViewer","isArticleNotFound","updateArticle","_this5","dangerouslySetInnerHTML","__html","marked","sanitize","components_CommentList","ArticleForm","onSubmit","handleTagInput","getSanitizedTagList","removeTag","split","filter","tagToRemove","updatedTagList","withAuthorizationCheck","func","resolveFn","hasPermissionFn","AuthorizedOnly","isAuthorized","isErrorHappened","resolved","isNotFoundError","ArticleEditor","saveChanges","articleRequest","ArticleForm_ArticleForm","ArticleCreator","Footer","ProtectedRoute","isAuthenticatedUser","isAnonymousUser","isUserLoading","_this$props","component","rest","objectWithoutProperties","Route","render","Redirect","url","BrowserRouter","components_Navigation","Switch","path","Home","components_ProtectedRoute","Footer_Footer","Boolean","hostname","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.078f1d2b.chunk.js","sourcesContent":["const config = {\n    API_BASE_URL: 'http://localhost:3000/api',\n    DEFAULT_USER_IMAGE: 'https://static.productionready.io/images/smiley-cyrus.jpg'\n};\n\nexport default config;","import config from '../config';\n\n\nexport class APIError extends Error {\n    constructor(statusCode, response, ...params) {\n        super(...params);\n\n        this.statusCode = statusCode;\n        this.response = response;\n    }\n}\n\n// could be rewritten as interceptor\nfunction prepareBody(requestOptions) {\n    const options = {...requestOptions};\n\n    if (!options.headers || !options.headers['Content-type']) {\n        return requestOptions;\n    }\n\n    switch (options.headers['Content-type']) {\n        case 'application/json':\n            options.body = JSON.stringify(options.body);\n            break;\n\n        default:\n            break;\n    }\n\n    return options;\n}\n\nconst interceptors = [];\nexport function addRequestInterceptor(func) {\n    interceptors.push(func);\n}\n\nconst responseInterceptors = [];\nexport function addResponseInterceptor(func) {\n    responseInterceptors.push(func);\n}\n\nfunction applyRequestInterceptors(requestUrl, requestOptions) {\n    return interceptors.reduce((request, interceptor) => {\n        const [url, options] = request;\n        return interceptor(url, options);\n    }, [requestUrl, requestOptions]);\n}\n\n\nfunction prepareQueryParameters(queryParameters) {\n    if (!queryParameters) { return '';}\n\n    const parameters = Object.keys(queryParameters);\n    if (parameters.length > 0) {\n        return '?' + parameters.map((key) => {\n            return `${key}=${queryParameters[key]}`;\n        }).join('&');\n    } else {\n        return '';\n    }\n}\n\nexport default function request(resource, options) {\n    const abortController = new AbortController();\n    const defaultOptions = {\n        headers: {'Content-type': 'application/json'},\n        mode: 'cors',\n        signal: abortController.signal\n    };\n\n    let requestOptions = Object.assign({}, defaultOptions, options);\n    requestOptions = prepareBody(requestOptions);\n\n    let requestUrl = `${config.API_BASE_URL}/${resource}`;\n    if (interceptors.length > 0) {\n        [requestUrl, requestOptions] = applyRequestInterceptors(requestUrl, requestOptions);\n    }\n    requestUrl = requestUrl + prepareQueryParameters(requestOptions.queryParameters);\n\n    // response.ok is true when status code is between 200-299\n    let responseClone;\n    return {\n        promise: fetch(requestUrl, requestOptions)\n            .then((response) => {\n                if (responseInterceptors.length > 0) {\n                    for (const interceptor of responseInterceptors) {\n                        response = interceptor(response);\n                    }\n                }\n                return response;\n            })\n            .then((response) => {\n                responseClone = response.clone();\n                return responseClone.json();\n            })\n            .catch((error) => {\n                // could not parse JSON\n                if (error.name === 'SyntaxError') {\n                    return {}\n                } else {\n                    throw error;\n                }\n            })\n            .then((json) => {\n                if (responseClone.ok) {\n                    return json;\n                } else {\n                    throw new APIError(responseClone.status, json);\n                }\n            }),\n        abort: () => { abortController.abort(); }\n    }\n}\n","const JWT_KEY_NAME = 'conduit-jwt';\nlet token;\n\nexport const jwt = {\n    set(value) {\n        token = value;\n        localStorage.setItem(JWT_KEY_NAME, value);\n    },\n\n    get() {\n        if (token) {\n            return token;\n        } else {\n            token = localStorage.getItem(JWT_KEY_NAME);\n            return token;\n        }\n    },\n\n    remove() {\n        token = undefined;\n        localStorage.removeItem(JWT_KEY_NAME);\n    },\n\n    isSet() {\n        return this.get() !== null;\n    }\n};\n","export default class Observable {\n    constructor(value) {\n        this.subscriptions = [];\n        this.currentValue = value;\n        this._isCurrentValueSet = arguments.length > 0;\n    }\n\n    subscribe(observer) {\n        this.subscriptions.push(observer);\n        if (this._isCurrentValueSet) {\n            observer(this.currentValue);\n        }\n    }\n\n    unsubscribe(observer) {\n        const index = this.subscriptions.findIndex((subscription) => { return observer === subscription; });\n        if (index >= 0) {\n            this.subscriptions.splice(index, 1);\n        }\n    }\n\n    notify(value) {\n        this.currentValue = value;\n        this._isCurrentValueSet = true;\n\n        for (const observer of this.subscriptions) {\n            observer(value);\n        }\n    }\n}\n","import request from '../services/request';\nimport Observable from '../services/Observable';\nimport {jwt} from '../services/jwt';\n\nexport const authenticationStatusEnum = {\n    AUTHENTICATED: 'authenticated',\n    NOT_AUTHENTICATED: 'not_authenticated',\n    IN_PROGRESS: 'in_progress'\n};\n\nconst currentUser = new Observable();\nconst authenticationStatus = new Observable(\n    jwt.isSet() ?\n    authenticationStatusEnum.IN_PROGRESS :\n    authenticationStatusEnum.NOT_AUTHENTICATED\n);\n\nfunction getCurrentUser() {\n    const req = request('user', {\n        method: 'GET'\n    });\n\n    req.promise = req.promise.then((authenticatedUser) => {\n        const user = authenticatedUser.user;\n\n        currentUser.notify(user);\n        authenticationStatus.notify(authenticationStatusEnum.AUTHENTICATED);\n\n        return user;\n    })\n    .catch((error) => {\n        authenticationStatus.notify(authenticationStatusEnum.NOT_AUTHENTICATED);\n        throw error;\n    });\n\n    return req;\n}\n\nfunction register(username, email, password) {\n    return request('users', {\n        method: 'POST',\n        body: {user: {username: username, email: email, password: password}}\n    });\n}\n\nfunction logIn(email, password) {\n    const req = request('users/login', {\n        method: 'POST',\n        body: {user: {email: email, password: password}}\n    });\n\n    req.promise = req.promise.then((authenticatedUser) => {\n        jwt.set(authenticatedUser.user.token);\n        authenticationStatus.notify(authenticationStatusEnum.AUTHENTICATED);\n        currentUser.notify(authenticatedUser.user);\n        return authenticatedUser;\n    });\n\n    return req;\n}\n\nfunction logOut() {\n    jwt.remove();\n    userResource.authenticationStatus.notify(authenticationStatusEnum.NOT_AUTHENTICATED);\n    window.location.href = '/';\n    return Promise.resolve(true);\n}\n\nfunction update(updatedUser) {\n    const req = request('user', {\n        method: 'PUT',\n        body: {user: updatedUser}\n    });\n\n    req.promise = req.promise.then((authenticatedUser) => {\n        const user = authenticatedUser.user;\n        currentUser.notify(user);\n\n        return user;\n    });\n\n    return req;\n}\n\nconst userResource = {\n    getCurrentUser: getCurrentUser,\n    currentUser: currentUser,\n    authenticationStatus: authenticationStatus,\n    register: register,\n    logIn: logIn,\n    logOut: logOut,\n    update: update\n};\n\nexport default userResource;\n","import React from 'react';\n\n\nfunction isEmptyObject(props) {\n    return !props.errors || Object.keys(props.errors).length === 0;\n}\n\nexport const ErrorViewer = (props) => {\n    return (\n        <div>\n            {\n                !isEmptyObject(props) &&\n                <ul className=\"text-danger\">\n                    {\n                        Object.keys(props.errors).map((errorKey) => {\n                            return <li key={errorKey}>{errorKey}: {props.errors[errorKey]}</li>\n                        })\n                    }\n                </ul>\n            }\n        </div>\n    );\n};\n","export const navigation = {\n    search(location, toPath, queryParams, {preserveQueryParams = true} = {}) {\n        const currentQueryParams = new URLSearchParams(location.search);\n\n        let updatedQueryParams = {};\n        if (preserveQueryParams) {\n            for (const key of currentQueryParams.keys()) {\n                updatedQueryParams[key] = currentQueryParams.get(key);\n            }\n        }\n\n        return (toPath || location.pathname) + '?' + new URLSearchParams(Object.assign(updatedQueryParams, queryParams)).toString();\n    },\n\n    updateQueryParams(history, location, queryParam, options) {\n        history.push(this.search(location, location.pathname, queryParam, options));\n    },\n\n    getQueryParams(location) {\n        const queryParams = {};\n        const searchParams = new URLSearchParams(location.search);\n\n        searchParams.forEach((value, key) => {\n            queryParams[key] = value;\n        });\n\n        return queryParams;\n    },\n\n    go(history, ...args) {\n        history.push.apply(history, args);\n    }\n};\n","import React from 'react';\nimport {withRouter} from \"react-router-dom\";\nimport {navigation} from \"../services/navigation\";\n\n\nfunction provideNavigation(WrappedComponent) {\n    return (props) => {\n        const boundNavigation = {\n            search: navigation.search.bind(navigation, props.location),\n            updateQueryParams: navigation.updateQueryParams.bind(navigation, props.history, props.location),\n            queryParams: navigation.getQueryParams(props.location),\n            go: navigation.go.bind(navigation, props.history)\n        };\n\n        return (\n            <WrappedComponent {...props} navigation={boundNavigation}/>\n        );\n    };\n}\n\nexport default function withNavigation(WrappedComponent) {\n    return withRouter(provideNavigation(WrappedComponent));\n}\n","import React, {Component} from 'react';\nimport user from '../api/user';\nimport {ErrorViewer} from \"../components/ErrorViewer\";\nimport {Link} from \"react-router-dom\";\nimport withNavigation from \"../hoc/withNavigation\";\n\n\nclass Registration extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            username: '',\n            email: '',\n            password: '',\n            isBusy: false,\n            errors: {}\n        };\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.register = this.register.bind(this);\n    }\n\n    register(event) {\n        event.preventDefault();\n\n        this.setState({isBusy: true, errors: {}});\n        this.registrationRequest = user.register(this.state.username, this.state.email, this.state.password);\n        this.registrationRequest.promise\n            .then(() => {\n                this.loginRequest = user.logIn(this.state.email, this.state.password);\n                return this.loginRequest.promise;\n            })\n            .then(() => {\n                if (this.props.location.state && this.props.location.state.from) {\n                    this.props.navigation.go(this.props.location.state.from);\n                } else {\n                    this.props.navigation.go('/');\n                }\n            })\n            .catch((error) => {\n                if (error.name === \"AbortError\") {\n                    return;\n                }\n                console.error(error);\n                this.setState({isBusy: false, errors: error.response.errors});\n            });\n    }\n\n    handleInputChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    componentWillUnmount() {\n        if (this.registrationRequest) {\n            this.registrationRequest.abort();\n        }\n\n        if (this.loginRequest) {\n            this.loginRequest.abort();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"auth-page\">\n                <div className=\"container page\">\n                    <div className=\"row\">\n                        <div className=\"col-md-6 offset-md-3 col-xs-12\">\n                            <h1 className=\"text-xs-center\">Sign Up</h1>\n                            <p className=\"text-xs-center\">\n                                <Link to=\"/login\">Have an account?</Link>\n                            </p>\n\n                            <form>\n                                <ErrorViewer errors={this.state.errors}/>\n\n                                <fieldset className=\"form-group\">\n                                    <input className=\"form-control form-control-lg\"\n                                           type=\"text\"\n                                           placeholder=\"Username\"\n                                           name=\"username\"\n                                           onChange={this.handleInputChange}/>\n\n                                </fieldset>\n\n                                <fieldset className=\"form-group\">\n                                    <input className=\"form-control form-control-lg\"\n                                           type=\"text\"\n                                           placeholder=\"Email\"\n                                           name=\"email\"\n                                           onChange={this.handleInputChange}/>\n\n                                </fieldset>\n\n                                <fieldset className=\"form-group\">\n                                    <input className=\"form-control form-control-lg\"\n                                           type=\"password\"\n                                           onChange={this.handleInputChange}\n                                           name=\"password\"\n                                           placeholder=\"Password\"/>\n                                </fieldset>\n\n                                <button className=\"btn btn-lg btn-primary pull-xs-right\"\n                                        disabled={this.state.isBusy}\n                                        onClick={this.register}>\n                                    Sign in\n                                </button>\n                            </form>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withNavigation(Registration);","import React, {Component} from 'react';\nimport {Link} from \"react-router-dom\";\n\nimport user from '../api/user';\nimport {ErrorViewer} from \"../components/ErrorViewer\";\nimport withNavigation from \"../hoc/withNavigation\";\n\n\nclass LogIn extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            email: '',\n            password: '',\n            isBusy: false,\n            errors: {}\n        };\n\n        this.logIn = this.logIn.bind(this);\n        this.handleInputChange = this.handleInputChange.bind(this);\n    }\n\n    logIn(event) {\n        event.preventDefault();\n\n        this.setState({isBusy: true});\n        this.loginRequest = user.logIn(this.state.email, this.state.password);\n        this.loginRequest.promise\n            .then(() => {\n                if (this.props.location.state && this.props.location.state.from) {\n                    this.props.navigation.go(this.props.location.state.from);\n                } else {\n                    this.props.navigation.go('/');\n                }\n            })\n            .catch((error) => {\n                if (error.name === \"AbortError\") {\n                    return;\n                }\n                console.error(error);\n                this.setState({isBusy: false, errors: error.response.errors});\n            });\n    }\n\n    handleInputChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    componentWillUnmount() {\n        if (this.loginRequest) {\n            this.loginRequest.abort();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"auth-page\">\n                <div className=\"container page\">\n                    <div className=\"row\">\n                        <div className=\"col-md-6 offset-md-3 col-xs-12\">\n                            <h1 className=\"text-xs-center\">Sign in</h1>\n                            <p className=\"text-xs-center\">\n                                <Link to=\"/register\">Need an account?</Link>\n                            </p>\n\n                            <form>\n                                <ErrorViewer errors={this.state.errors}/>\n\n                                <fieldset className=\"form-group\">\n                                    <input className=\"form-control form-control-lg\"\n                                           type=\"text\"\n                                           placeholder=\"Email\"\n                                           name=\"email\"\n                                           onChange={this.handleInputChange}/>\n\n                                </fieldset>\n\n                                <fieldset className=\"form-group\">\n                                    <input className=\"form-control form-control-lg\"\n                                           type=\"password\"\n                                           onChange={this.handleInputChange}\n                                           name=\"password\"\n                                           placeholder=\"Password\"/>\n                                </fieldset>\n\n                                <button className=\"btn btn-lg btn-primary pull-xs-right\"\n                                        disabled={this.state.isBusy}\n                                        onClick={this.logIn}>\n                                    Sign in\n                                </button>\n                            </form>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withNavigation(LogIn);","import {Component} from \"react\";\nimport user, {authenticationStatusEnum} from \"../api/user\";\nimport React from \"react\";\n\n\nexport default function withAuthenticatedUser(WrappedComponent) {\n    return class AuthenticatedUserHoc extends Component {\n        constructor(props) {\n            super(props);\n\n            this.state = {\n                currentUser: {},\n                authenticationStatus: authenticationStatusEnum.IN_PROGRESS\n            };\n\n            this.onCurrentUserChange = this.onCurrentUserChange.bind(this);\n            this.onAuthentication = this.onAuthentication.bind(this);\n        }\n\n        onCurrentUserChange(user) {\n            this.setState({currentUser: user});\n        }\n\n        onAuthentication(authenticationStatus) {\n            this.setState({authenticationStatus: authenticationStatus});\n        }\n\n        componentDidMount() {\n            user.currentUser.subscribe(this.onCurrentUserChange);\n            user.authenticationStatus.subscribe(this.onAuthentication);\n        }\n\n        componentWillUnmount() {\n            user.currentUser.unsubscribe(this.onCurrentUserChange);\n            user.authenticationStatus.unsubscribe(this.onAuthentication);\n        }\n\n        render() {\n            return (\n                <WrappedComponent {...this.props}\n                                  currentUser={this.state.currentUser}\n                                  authenticationStatus={this.state.authenticationStatus}/>\n            );\n        }\n    }\n}","import React from 'react';\nimport {Link, NavLink} from 'react-router-dom';\nimport {authenticationStatusEnum} from \"../api/user\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\n\n\nconst Navigation = (props) => {\n    const isAuthenticated = props.authenticationStatus === authenticationStatusEnum.AUTHENTICATED;\n\n    return (\n        <nav className=\"navbar navbar-light\">\n            <div className=\"container\">\n                <Link className=\"navbar-brand\" to=\"/\">conduit</Link>\n\n                <ul className=\"nav navbar-nav pull-xs-right\">\n                    <li className=\"nav-item\">\n                        <NavLink className=\"nav-link\" activeClassName=\"active\" exact to=\"/\">Home</NavLink>\n                    </li>\n\n                    {\n                        isAuthenticated &&\n                        <li className=\"nav-item\">\n                            <NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/editor\">\n                                <i className=\"ion-compose\"></i>&nbsp;New Post\n                            </NavLink>\n                        </li>\n                    }\n\n                    {\n                        isAuthenticated &&\n                        <li className=\"nav-item\">\n                            <NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/settings\">\n                                <i className=\"ion-gear-a\"></i>&nbsp;Settings\n                            </NavLink>\n                        </li>\n                    }\n\n                    {\n                        !isAuthenticated &&\n                        <li className=\"nav-item\">\n                            <NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/login\">Sign in</NavLink>\n                        </li>\n                    }\n\n                    {\n                        !isAuthenticated &&\n                        <li className=\"nav-item\">\n                            <NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/register\">Sign up</NavLink>\n                        </li>\n                    }\n\n                    {\n                        isAuthenticated &&\n                        <li className=\"nav-item\">\n                            <NavLink className=\"nav-link\" activeClassName=\"active\" to={`/@${props.currentUser.username}`}>\n                                {props.currentUser.username}\n                            </NavLink>\n                        </li>\n                    }\n                </ul>\n            </div>\n        </nav>\n    );\n};\n\nexport default withAuthenticatedUser(Navigation);","import {Component} from \"react\";\nimport user from \"../api/user\";\nimport React from \"react\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\n\nclass ProfileSettings extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            user: this.getDefaultUserSettings()\n        };\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.updateSettings = this.updateSettings.bind(this);\n        this.logOut = this.logOut.bind(this);\n    }\n\n    handleInputChange(event) {\n        const user = {...this.state.user, [event.target.name]: event.target.value};\n        this.setState({user: user});\n    }\n\n    updateSettings(event) {\n        event.preventDefault();\n\n        const updatedUser = {...this.state.user};\n        if (updatedUser.password.length === 0) {\n            delete updatedUser.password;\n        }\n\n        this.request = user.update(updatedUser);\n        this.request.promise\n            .catch(console.error);\n    }\n\n    logOut() {\n        user.logOut();\n    }\n\n    getDefaultUserSettings() {\n        return {\n                image: this.props.currentUser.image || '',\n                email: this.props.currentUser.email || '',\n                bio: this.props.currentUser.bio || '',\n                username: this.props.currentUser.username || '',\n                password: ''\n        };\n    }\n\n    componentDidUpdate(prevProps) {\n        // currentUser is not available immediately when constructor() is called. This set's the fields\n        // another way to solve it is to set key on in the withAuthenticatedUser\n        if ((Object.keys(prevProps.currentUser).length === 0) && (Object.keys(this.props.currentUser).length > 0)) {\n            this.setState({\n                user: this._getDefaultUserSettings()\n            });\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.request) {\n            this.request.abort();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"settings-page\">\n                <div className=\"container page\">\n                    <div className=\"row\">\n\n                        <div className=\"col-md-6 offset-md-3 col-xs-12\">\n                            <h1 className=\"text-xs-center\">Your Settings</h1>\n\n                            <form>\n                                <fieldset>\n                                    <fieldset className=\"form-group\">\n                                        <input className=\"form-control\"\n                                               type=\"text\"\n                                               placeholder=\"URL of profile picture\"\n                                               name=\"image\"\n                                               value={this.state.user.image}\n                                               onChange={this.handleInputChange}/>\n                                    </fieldset>\n\n                                    <fieldset className=\"form-group\">\n                                        <input className=\"form-control form-control-lg\"\n                                               type=\"text\"\n                                               placeholder=\"Your Name\"\n                                               name=\"username\"\n                                               value={this.state.user.username}\n                                               onChange={this.handleInputChange}/>\n                                    </fieldset>\n\n                                    <fieldset className=\"form-group\">\n                                        <textarea className=\"form-control form-control-lg\"\n                                                  rows=\"8\"\n                                                  placeholder=\"Short bio about you\"\n                                                  name=\"bio\"\n                                                  value={this.state.user.bio}\n                                                  onChange={this.handleInputChange}></textarea>\n                                    </fieldset>\n\n                                    <fieldset className=\"form-group\">\n                                        <input className=\"form-control form-control-lg\"\n                                               type=\"text\"\n                                               placeholder=\"Email\"\n                                               name=\"email\"\n                                               value={this.state.user.email}\n                                               onChange={this.handleInputChange}/>\n                                    </fieldset>\n\n                                    <fieldset className=\"form-group\">\n                                        <input className=\"form-control form-control-lg\"\n                                               type=\"password\"\n                                               placeholder=\"Password\"\n                                               name=\"password\"\n                                               value={this.state.user.password}\n                                               onChange={this.handleInputChange}/>\n                                    </fieldset>\n\n                                    <button className=\"btn btn-lg btn-primary pull-xs-right\"\n                                            onClick={this.updateSettings}>\n                                        Update Settings\n                                    </button>\n                                </fieldset>\n                            </form>\n\n                            <hr/>\n\n                            <button className=\"btn btn-outline-danger\" onClick={this.logOut}>\n                                Or click here to logout.\n                            </button>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default withAuthenticatedUser(ProfileSettings);","import request from '../services/request';\n\n\nconst resource = 'articles';\nfunction getList(queryParameters) {\n    return request(`${resource}`, {\n        method: 'GET',\n        queryParameters: queryParameters\n    });\n}\n\nfunction get(slug) {\n    return request(`${resource}/${slug}`, {\n        method: 'GET'\n    });\n}\n\nfunction update(slug, changes) {\n    return request(`${resource}/${slug}`, {\n        method: 'PUT',\n        body: {article: changes}\n    });\n}\n\nfunction create(article) {\n    return request(`${resource}`, {\n        method: 'POST',\n        body: {article: article}\n    });\n}\n\nfunction remove(slug) {\n    return request(`${resource}/${slug}`, {\n        method: 'DELETE'\n    });\n}\n\nfunction favorite(slug) {\n    return request(`${resource}/${slug}/favorite`, {\n        method: 'POST'\n    });\n}\n\nfunction unfavorite(slug) {\n    return request(`${resource}/${slug}/favorite`, {\n        method: 'DELETE'\n    });\n}\n\nfunction isAuthor(article, user) {\n    return article.author.username === user.username;\n}\n\nexport const articleResource = {\n    getList: getList,\n    get: get,\n    update: update,\n    create: create,\n    remove: remove,\n    favorite: favorite,\n    unfavorite: unfavorite,\n    isAuthor: isAuthor\n};","import request from '../services/request';\n\n\nconst resource = 'articles/feed';\nfunction getList(queryParameters) {\n    return request(`${resource}`, {\n        method: 'GET',\n        queryParameters: queryParameters\n    });\n}\n\nexport const feedResource = {\n    getList: getList\n};","import {Component} from \"react\";\nimport React from \"react\";\nimport {articleResource} from \"../api/article\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\nimport {authenticationStatusEnum} from \"../api/user\";\n\n\nexport default class LikeButton extends Component {\n    constructor(props) {\n        super(props);\n\n        this.onButtonClick = this.onButtonClick.bind(this);\n    }\n\n    onButtonClick() {\n        if (this.props.isFavorited) {\n            this.props.onUnfavorite(this.props.articleSlug);\n        } else {\n            this.props.onFavorite(this.props.articleSlug);\n        }\n    }\n\n    render() {\n        return (\n            <button\n                className={`btn ${this.props.className} ${this.props.isFavorited ? 'btn-primary' : 'btn-outline-primary'}`}\n                onClick={this.onButtonClick}\n                disabled={this.props.isDisabled || false}>\n                <i className=\"ion-heart\"></i> {this.props.count}\n            </button>\n        );\n    }\n}\n\nclass ArticleLikeButton extends Component {\n    constructor(props) {\n        super(props);\n\n        this.favorite = this.favorite.bind(this);\n        this.unfavorite = this.unfavorite.bind(this);\n    }\n\n    favorite(articleSlug) {\n        this.favoriteRequest = articleResource.favorite(articleSlug);\n        this.favoriteRequest.promise.then(this.props.onFavorite)\n            .catch(console.error);\n    }\n\n    unfavorite(articleSlug) {\n        this.unfavoriteRequest = articleResource.unfavorite(articleSlug);\n        this.unfavoriteRequest.promise.then(this.props.onUnfavorite)\n            .catch(console.error);\n    }\n\n    componentWillUnmount() {\n        [this.favoriteRequest, this.unfavoriteRequest].forEach((request) => {\n            if (request) {\n                request.abort();\n            }\n        });\n    }\n\n    render() {\n        return (\n            <LikeButton {...this.props}\n                        onFavorite={this.favorite}\n                        onUnfavorite={this.unfavorite}\n                        isDisabled={this.props.authenticationStatus !== authenticationStatusEnum.AUTHENTICATED}/>\n        );\n    }\n}\nArticleLikeButton = withAuthenticatedUser(ArticleLikeButton);\n\nexport {ArticleLikeButton};\n","const date = {\n    format: function(isoDate) {\n        return new Date(isoDate).toDateString();\n    }\n};\n\nexport {\n    date\n}","import request from '../services/request';\n\n\nfunction getList() {\n    return request('tags', {\n        method: 'GET'\n    });\n}\n\nexport const tagResource = {\n    getList: getList\n};","import {Component} from \"react\";\nimport React from \"react\";\nimport {tagResource} from \"../api/tag\";\n\n\nexport default class TagList extends Component {\n    constructor(props) {\n        super(props);\n\n        this.onTagClick = this.onTagClick.bind(this);\n        this.onTagRemove = this.onTagRemove.bind(this);\n    }\n\n    onTagClick(tag) {\n        if (this.props.onTagClick) {\n            this.props.onTagClick(tag);\n        }\n    }\n\n    onTagRemove(tag, index) {\n        if (this.props.onTagRemove) {\n            this.props.onTagRemove(tag, index);\n        }\n    }\n\n    render() {\n        const cursorClass = this.props.onTagClick !== undefined ? 'u-cursor' : '';\n\n        return (\n            <ul className=\"tag-list\">\n                {\n                    this.props.tags.map((tag, index) => {\n\n                        return (\n                            <li className={`tag-pill tag-default ${cursorClass}`}\n                                key={`tag-${index}`}\n                                onClick={() => {this.onTagClick(tag)}}>\n                                {\n                                    this.props.onTagRemove &&\n                                    <i className=\"ion-close-round\" onClick={() => {this.onTagRemove(tag, index)}}></i>\n                                }\n                                {tag}\n                            </li>\n                        )\n                    })\n                }\n            </ul>\n        );\n    }\n}\n\nexport const ArticleTags = (props) => {\n    return <TagList tags={props.tags}/>\n};\n\nexport class PopularTags extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            tags: []\n        };\n\n        this.selectTag = this.selectTag.bind(this);\n    }\n\n    selectTag(tag) {\n        this.props.onSelect(tag);\n    }\n\n    componentDidMount() {\n        this.request = tagResource.getList();\n        this.request.promise\n            .then((response) => {\n                this.setState({tags: response.tags});\n            })\n            .catch(console.error);\n    }\n\n    componentWillUnmount() {\n        if (this.request) {\n            this.request.abort();\n        }\n    }\n\n    render() {\n        return (\n            <TagList tags={this.state.tags} onTagClick={this.selectTag}/>\n        );\n    }\n}\n","import {navigation} from \"./navigation\";\nimport React from \"react\";\n\n\nexport const pagination = {\n    getCurrentPageNumber(location) {\n        const searchParams = new URLSearchParams(location.search);\n        if (searchParams.has('page')) {\n            return parseInt(searchParams.get('page')) || 1;\n        } else {\n            return 1;\n        }\n    },\n\n    getPageOffset(pageNumberOrLocation, maxItemsPerPage) {\n        let pageNumber;\n        if (Number.isInteger(pageNumberOrLocation)) {\n            pageNumber = pageNumberOrLocation;\n        } else {\n            pageNumber = this.getCurrentPageNumber(pageNumberOrLocation);\n        }\n\n        return pageNumber * maxItemsPerPage - maxItemsPerPage;\n    },\n\n    getTotalPages(itemCount, maxItemsPerPage) {\n        return Math.ceil(itemCount / maxItemsPerPage);\n    },\n\n    goPage(history, location, page) {\n        navigation.updateQueryParams(history, location, {page: page});\n    },\n\n    paginate(location, totalPages, onPageClick) {\n        const pageNumber = this.getCurrentPageNumber(location);\n        const pages = [];\n\n        for (let i = 1; i <= totalPages; i += 1) {\n            pages.push(\n                (\n                    <li className={`u-cursor page-item ${pageNumber === i ? 'active' : ''}`}\n                        key={i}\n                        onClick={() => {onPageClick(i)}}>\n                        <span className=\"page-link\">\n                            {i}\n                        </span>\n                    </li>\n                )\n            );\n        }\n\n        return (\n            <ul className=\"pagination\">\n                {pages}\n            </ul>\n        );\n    }\n};\n","import {Component} from \"react\";\nimport {articleResource} from \"../api/article\";\nimport {Link} from \"react-router-dom\";\nimport {feedResource} from \"../api/feed\";\nimport React from \"react\";\nimport {ArticleLikeButton} from \"./LikeButton\";\nimport {date} from '../services/representator';\nimport {ArticleTags} from \"./TagList\";\nimport {pagination} from \"../services/pagination\";\nimport withNavigation from \"../hoc/withNavigation\";\n\n\nfunction feedFactory(dataSource, queryParams) {\n    return class Feed extends Component {\n        constructor(props) {\n            super(props);\n\n            this.MAX_ITEMS_PER_PAGE = queryParams.limit || 10;\n            this.defaultQueryParams = {...queryParams};\n            if (this.props.tag) {\n                this.defaultQueryParams.tag = this.props.tag;\n            }\n            this.state = {\n                feed: [],\n                isReady: false,\n                totalArticles: 0,\n                totalPages: 0\n            };\n\n            this.getFeed = this.getFeed.bind(this);\n            this.handleLikeButton = this.handleLikeButton.bind(this);\n            this.updatePageQueryParam = this.updatePageQueryParam.bind(this);\n        }\n\n        getFeed() {\n            this.setState({isReady: false});\n\n            const queryParams = Object.assign(\n                {},\n                this.defaultQueryParams,\n                {\n                    limit: this.MAX_ITEMS_PER_PAGE,\n                    offset: pagination.getPageOffset(this.props.location, this.MAX_ITEMS_PER_PAGE)\n                }\n            );\n\n            this.feedRequest = dataSource(queryParams);\n            this.feedRequest.promise.then((feed) => {\n                    this.setState({\n                        feed: feed.articles,\n                        isReady: true,\n                        totalArticles: feed.articlesCount,\n                        totalPages: pagination.getTotalPages(feed.articlesCount, this.MAX_ITEMS_PER_PAGE)\n                    });\n                })\n                .catch((error) => {\n                    if (error.name === \"AbortError\") {\n                        return\n                    }\n\n                    console.error(error);\n                    this.setState({isReady: false});\n                });\n        }\n\n        // increment/decrement `favorited` field for an article in place instead of fetching articles again.\n        handleLikeButton(response) {\n            const articleSlug = response.article.slug;\n            const index = this.state.feed.findIndex(article => article.slug === articleSlug);\n\n            if (index === -1) {\n                return;\n            }\n\n            const article = {...this.state.feed[index]};\n            const feed = [...this.state.feed];\n\n            article.favorited = !article.favorited;\n            article.favoritesCount = article.favorited ? article.favoritesCount + 1 : article.favoritesCount - 1;\n\n            feed.splice(index, 1, article);\n            this.setState({feed: feed});\n        }\n\n        updatePageQueryParam(page) {\n            pagination.goPage(this.props.history, this.props.location, page);\n        }\n\n        componentDidMount() {\n            this.getFeed();\n        }\n\n        componentDidUpdate(prevProps) {\n            // if query parameter ?page changed. get a new page.\n            const {page: prevPage} = prevProps.navigation.queryParams;\n            const {page: currentPage} = this.props.navigation.queryParams;\n            if (prevPage !== currentPage) {\n                this.getFeed();\n            }\n        }\n\n        componentWillUnmount() {\n            for (const request of [this.feedRequest, this.favoriteRequest, this.unfavoriteRequest]) {\n                if (request) {\n                    request.abort();\n                }\n            }\n        }\n\n        render() {\n            return (\n                <div>\n                    {!this.state.isReady && <div>Loading articles...</div>}\n\n                    {this.state.isReady && this.state.feed.length === 0 && <div>No articles are here... yet.</div>}\n\n                    {this.state.isReady && this.state.feed.length > 0 &&\n                        this.state.feed.map((article) => {\n                            return (\n                                <div className=\"article-preview\" key={article.createdAt}>\n                                    <div className=\"article-meta\">\n                                        {/* Author image*/}\n                                        <Link to={`/@${article.author.username}`}>\n                                            <img src={article.author.image} alt={article.author.username}/>\n                                        </Link>\n\n                                        {/* Author username */}\n                                        <div className=\"info\">\n                                            <Link to={`/@${article.author.username}`} className=\"author\">\n                                                {article.author.username}\n                                            </Link>\n\n                                            <span className=\"date\">{date.format(article.createdAt)}</span>\n                                        </div>\n\n                                        <ArticleLikeButton\n                                            className=\"btn-sm pull-xs-right\"\n                                            articleSlug={article.slug}\n                                            count={article.favoritesCount}\n                                            isFavorited={article.favorited}\n                                            onFavorite={this.handleLikeButton}\n                                            onUnfavorite={this.handleLikeButton}>\n                                        </ArticleLikeButton>\n                                    </div>\n\n                                    {/* Link to article */}\n                                    <Link to={`/article/${article.slug}`} className=\"preview-link\">\n                                        <h1>{article.title}</h1>\n                                        <p>{article.description}</p>\n                                        <span>Read more...</span>\n                                        <ArticleTags tags={article.tagList}/>\n                                    </Link>\n                                </div>\n                            )\n                        })\n                    }\n\n                    {pagination.paginate(this.props.location, this.state.totalPages, this.updatePageQueryParam)}\n                </div>\n            );\n        }\n    }\n}\n\nconst GlobalFeed = withNavigation(feedFactory(articleResource.getList, {}));\nconst PersonalFeed = withNavigation(feedFactory(feedResource.getList, {}));\nconst TagFeed = withNavigation(feedFactory(articleResource.getList, {}));\n\nconst authorFeedFactory = function(username) {\n    return withNavigation(feedFactory(articleResource.getList, {author: username, limit: 5}));\n};\n\nconst favoritedArticlesFeedFactory = function(username) {\n    return withNavigation(feedFactory(articleResource.getList, {favorited: username, limit: 5}));\n};\n\nexport {\n    GlobalFeed,\n    PersonalFeed,\n    TagFeed,\n    authorFeedFactory,\n    favoritedArticlesFeedFactory\n};\n","import {Component} from \"react\";\nimport React from \"react\";\nimport {GlobalFeed, PersonalFeed, TagFeed} from \"../components/feed\";\nimport {PopularTags} from \"../components/TagList\";\nimport {Link} from \"react-router-dom\";\nimport withNavigation from \"../hoc/withNavigation\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\nimport {authenticationStatusEnum} from \"../api/user\";\n\n\n// if user is authenticated default feed is 'personal', if not then 'global'\nconst feedChoice = {\n    GLOBAL: 'global',\n    PERSONAL: 'personal',\n    TAG: 'tag', // user selected a tag\n    NONE: 'none'\n};\n\nclass HomePage extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            selectedFeed: feedChoice.NONE\n        };\n\n        this.updateTagQueryParam = this.updateTagQueryParam.bind(this);\n        this.handleQueryParams = this.handleQueryParams.bind(this);\n        this.getDefaultFeed = this.getDefaultFeed.bind(this);\n    }\n\n    getDefaultFeed() {\n        switch (this.props.authenticationStatus) {\n            case authenticationStatusEnum.AUTHENTICATED:\n                return feedChoice.PERSONAL;\n            case authenticationStatusEnum.NOT_AUTHENTICATED:\n                return feedChoice.GLOBAL;\n            default:\n                return feedChoice.NONE;\n        }\n    }\n\n    handleQueryParams() {\n        const {feed, tag} = this.props.navigation.queryParams;\n\n        if (feed && feedChoice.hasOwnProperty(feed.toUpperCase())) {\n            if ((feed === feedChoice.PERSONAL) &&\n                this.props.authenticationStatus !== authenticationStatusEnum.AUTHENTICATED) {\n                // viewing personal feed allowed only for authenticated users\n                this.props.navigation.go('/login', {state: {from: this.props.location}});\n            }\n            this.setState({selectedFeed: feed});\n        } else if (tag) {\n            this.setState({selectedFeed: feedChoice.TAG, tag});\n        } else {\n            this.setState({selectedFeed: this.getDefaultFeed()});\n        }\n    }\n\n    updateTagQueryParam(tag) {\n        this.props.navigation.updateQueryParams({tag}, {preserveQueryParams: false});\n    }\n\n    ifTagThen(tag, className) {\n        return tag === this.state.selectedFeed ? className : '';\n    }\n\n    componentDidUpdate(prevProps) {\n        if ((prevProps.authenticationStatus !== this.props.authenticationStatus) ||\n            (prevProps.location.search !== this.props.location.search)) {\n            this.handleQueryParams();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"home-page\">\n\n                <div className=\"banner\">\n                    <div className=\"container\">\n                        <h1 className=\"logo-font\">conduit</h1>\n                        <p>A place to share your knowledge.</p>\n                    </div>\n                </div>\n\n                <div className=\"container page\">\n                    <div className=\"row\">\n\n                        <div className=\"col-md-9\">\n                            {/* Feed types */}\n                            <div className=\"feed-toggle\">\n                                <ul className=\"nav nav-pills outline-active\">\n                                    {\n                                        (this.props.authenticationStatus === authenticationStatusEnum.AUTHENTICATED) &&\n                                        <li className=\"nav-item u-cursor\">\n                                            <Link to=\"?feed=personal\" className={`nav-link ${this.ifTagThen(feedChoice.PERSONAL, \"active\")}`}>\n                                                Your Feed\n                                            </Link>\n                                        </li>\n                                    }\n\n                                    {\n                                        <li className=\"nav-item u-cursor\">\n                                            <Link to='/?feed=global' className={`nav-link ${this.ifTagThen(feedChoice.GLOBAL, \"active\")}`}>\n                                                Global Feed\n                                            </Link>\n                                        </li>\n                                    }\n\n                                    {\n                                        this.state.selectedFeed === feedChoice.TAG &&\n                                        <li className=\"nav-item u-cursor\">\n                                            <Link to={`?tag=${this.state.tag}`} className={`nav-link ${this.ifTagThen(feedChoice.TAG, \"active\")}`}>\n                                                <i className=\"ion-pound\"></i>\n                                                {this.state.tag}\n                                            </Link>\n                                        </li>\n                                    }\n                                </ul>\n                            </div>\n\n                            {/* Article feeds */}\n                            {\n                                this.state.selectedFeed === feedChoice.GLOBAL &&\n                                <GlobalFeed/>\n                            }\n\n                            {\n                                this.state.selectedFeed === feedChoice.PERSONAL &&\n                                <PersonalFeed/>\n                            }\n\n                            {\n                                this.state.selectedFeed === feedChoice.TAG &&\n                                <TagFeed key={this.state.tag} tag={this.state.tag}/>\n                            }\n                        </div>\n\n                        {/* Tags */}\n                        <div className=\"col-md-3\">\n                            <div className=\"sidebar\">\n                                <p>Popular Tags</p>\n\n                                <PopularTags onSelect={this.updateTagQueryParam}/>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default withAuthenticatedUser(withNavigation(HomePage));\n","import request from \"../services/request\";\n\n\nfunction get(username) {\n    const req = request(`profiles/${username}`, {\n        method: 'GET'\n    });\n\n    req.promise = req.promise.then((profile) => {\n        return profile.profile;\n    });\n\n    return req;\n}\n\nfunction follow(username) {\n    return request(`profiles/${username}/follow`, {\n        method: 'POST'\n    });\n}\n\nfunction unfollow(username) {\n    return request(`profiles/${username}/follow`, {\n        method: 'DELETE'\n    });\n}\n\nexport const profileResource = {\n    get: get,\n    follow: follow,\n    unfollow: unfollow\n};","import React, {Component} from 'react';\nimport {profileResource} from \"../api/profile\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\nimport {authenticationStatusEnum} from \"../api/user\";\n\n\nexport class FollowButton extends Component {\n    constructor(props) {\n        super(props);\n\n        this.onButtonClick = this.onButtonClick.bind(this);\n    }\n\n    onButtonClick() {\n        if (this.props.isFollowing) {\n            this.props.onUnfollow();\n        } else {\n            this.props.onFollow();\n        }\n    }\n\n    render() {\n        const buttonStyle = this.props.isFollowing ? 'btn-secondary' : 'btn-outline-secondary';\n\n        return (\n            <button className={`btn btn-sm ${buttonStyle} ${this.props.className}`}\n                    onClick={this.onButtonClick}\n                    disabled={this.props.isDisabled}>\n                <i className=\"ion-plus-round\"></i>\n                &nbsp;\n                {this.props.isFollowing ? 'Unfollow' : 'Follow'} {this.props.subject}\n            </button>\n        );\n    }\n}\n\nclass FollowUserButton extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isBusy: false\n        };\n\n        this.follow = this.follow.bind(this);\n        this.unfollow = this.unfollow.bind(this);\n        this.makeRequest = this.makeRequest.bind(this);\n    }\n\n    follow() {\n        this.makeRequest(profileResource.follow, this.props.onFollow);\n    }\n\n    unfollow() {\n        this.makeRequest(profileResource.unfollow, this.props.onUnfollow);\n    }\n\n    makeRequest(requestFn, callbackFn) {\n        this.setState({isBusy: true});\n        this.request = requestFn(this.props.profile.username);\n\n        this.request.promise\n            .then(() => {\n                this.setState({isBusy: false});\n                callbackFn();\n            })\n            .catch((error) => {\n                if (error.name === 'AbortError') {\n                    return;\n                }\n\n                this.setState({isBusy: false});\n            });\n    }\n\n    componentWillUnmount() {\n        if (this.request) {\n            this.request.abort();\n        }\n    }\n\n    render() {\n        return (\n            <FollowButton isFollowing={this.props.profile.following}\n                          onUnfollow={this.unfollow}\n                          onFollow={this.follow}\n                          subject={this.props.profile.username}\n                          isDisabled={this.props.authenticationStatus !== authenticationStatusEnum.AUTHENTICATED}/>\n        );\n    }\n}\n\nFollowUserButton = withAuthenticatedUser(FollowUserButton);\n\nexport { FollowUserButton };","import React, {Fragment} from 'react';\n\n\nconst NotFound404 = (props) => {\n    return (\n        <Fragment>\n            {\n                props.isShown &&\n                <div className=\"container page\">\n                    <div className=\"row\">\n                        <div className=\"col-md-10 offset-md-1 col-xs-12\">\n                            <div className=\"alert alert-warning\" role=\"alert\">\n                                Not Found\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            }\n\n            {\n                !props.isShown &&\n                props.children\n            }\n        </Fragment>\n    );\n};\n\nexport default NotFound404;\n\n","import {Component} from \"react\";\nimport {profileResource} from \"../api/profile\";\nimport {Link} from \"react-router-dom\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\nimport React from \"react\";\nimport {authorFeedFactory, favoritedArticlesFeedFactory} from \"../components/feed\";\nimport {FollowUserButton} from \"../components/FollowButton\";\nimport NotFound404 from \"../components/NotFound404\";\nimport withNavigation from \"../hoc/withNavigation\";\n\n\nconst feedChoice = {\n    AUTHOR_ARTICLES: 'Author articles',\n    AUTHOR_FAVORITES: 'Author favorites'\n};\n\nclass UserProfile extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            profile: {},\n            selectedFeed: this.getSelectedFeedFromQueryParams(),\n            AuthorFeed: undefined,\n            FavoritedArticlesFeed: undefined,\n            isUserProfileNotFound: false\n        };\n\n        this.getUserProfile = this.getUserProfile.bind(this);\n        this.prepareUserProfilePage = this.prepareUserProfilePage.bind(this);\n        this.getSelectedFeedFromQueryParams = this.getSelectedFeedFromQueryParams.bind(this);\n    }\n\n    getSelectedFeedFromQueryParams() {\n        const queryParams = new URLSearchParams(this.props.location.search);\n        const feed = queryParams.get('feed');\n\n        if (feed && feedChoice.hasOwnProperty(feed.toUpperCase())) {\n            return feedChoice[feed.toUpperCase()];\n        } else {\n            return feedChoice.AUTHOR_ARTICLES;\n        }\n    }\n\n    isOwner() {\n        return this.props.currentUser.username === this.props.match.params.user;\n    }\n\n    ifFeedThen(feed, className) {\n        return this.state.selectedFeed === feed ? className : '';\n    }\n\n    prepareUserProfilePage() {\n        this.getUserProfile()\n            .then((profile) => {\n                this.getUserFeed(profile);\n            });\n    }\n\n    getUserProfile() {\n        this.request = profileResource.get(this.props.match.params.user);\n        this.request.promise = this.request.promise.then((profile) => {\n                this.setState({profile: profile});\n                return profile;\n            })\n            .catch((error) => {\n                if (error.statusCode === 404) {\n                    this.setState({isUserProfileNotFound: true});\n                }\n            });\n\n        return this.request.promise;\n    }\n\n    getUserFeed(profile) {\n        this.setState({\n            AuthorFeed: authorFeedFactory(profile.username),\n            FavoritedArticlesFeed: favoritedArticlesFeedFactory(profile.username)\n        });\n    }\n\n    componentDidMount() {\n        this.prepareUserProfilePage();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.match.params.user !== this.props.match.params.user) {\n            this.prepareUserProfilePage();\n        } else if (prevProps.location.search !== this.props.location.search) {\n            this.setState({selectedFeed: this.getSelectedFeedFromQueryParams()});\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.request) {\n            this.request.abort();\n        }\n    }\n\n    render() {\n        return (\n            <NotFound404 isShown={this.state.isUserProfileNotFound}>\n                <div className=\"profile-page\">\n\n                    <div className=\"user-info\">\n                        <div className=\"container\">\n                            <div className=\"row\">\n\n                                <div className=\"col-xs-12 col-md-10 offset-md-1\">\n                                    <img src={this.state.profile.image} className=\"user-img\"\n                                         alt={`${this.state.profile.username} avatar`}/>\n\n                                    <h4>{this.state.profile.username}</h4>\n\n                                    <p>{this.state.profile.bio}</p>\n\n                                    {\n                                        this.isOwner() &&\n                                        <Link to=\"/settings\" className=\"btn btn-sm btn-outline-secondary action-btn\">\n                                            <i className=\"ion-gear-a\"></i> Edit Profile Settings\n                                        </Link>\n                                    }\n\n                                    {\n                                        !this.isOwner() &&\n                                        <FollowUserButton className=\"action-btn\"\n                                                          profile={this.state.profile}\n                                                          onFollow={this.getUserProfile}\n                                                          onUnfollow={this.getUserProfile}/>\n                                    }\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"container\">\n                        <div className=\"row\">\n\n                            <div className=\"col-xs-12 col-md-10 offset-md-1\">\n                                <div className=\"articles-toggle\">\n                                    <ul className=\"nav nav-pills outline-active\">\n                                        <li className=\"nav-item u-cursor\">\n                                            <Link to={{search: '?feed=author_articles'}} className={`nav-link ${this.ifFeedThen(feedChoice.AUTHOR_ARTICLES, \"active\")}`}>\n                                                My Articles\n                                            </Link>\n                                        </li>\n\n                                        <li className=\"nav-item u-cursor\">\n                                            <Link to={{search: '?feed=author_favorites'}} className={`nav-link ${this.ifFeedThen(feedChoice.AUTHOR_FAVORITES, \"active\")}`}>\n                                                Favorited Articles\n                                            </Link>\n                                        </li>\n                                    </ul>\n                                </div>\n\n                                {/* Author articles */}\n                                {\n                                    this.state.profile.username && this.state.selectedFeed === feedChoice.AUTHOR_ARTICLES &&\n                                    this.state.AuthorFeed && <this.state.AuthorFeed/>\n                                }\n\n                                {/* Author favorited articles */}\n                                {\n                                    this.state.profile.username && this.state.selectedFeed === feedChoice.AUTHOR_FAVORITES &&\n                                    this.state.FavoritedArticlesFeed && <this.state.FavoritedArticlesFeed/>\n                                }\n                            </div>\n\n                        </div>\n                    </div>\n\n                </div>\n            </NotFound404>\n        )\n    }\n}\nexport default withNavigation(withAuthenticatedUser(UserProfile));","import request from '../services/request';\n\n\nfunction getList(articleSlug) {\n    return request(`articles/${articleSlug}/comments`, {\n        method: 'GET'\n    });\n}\n\nfunction create(articleSlug, comment) {\n    return request(`articles/${articleSlug}/comments`, {\n        method: 'POST',\n        body: {comment: {body: comment}}\n    });\n}\n\nfunction remove(articleSlug, commentId) {\n    return request(`articles/${articleSlug}/comments/${commentId}`, {\n        method: 'DELETE'\n    });\n}\n\nfunction isAuthor(user, comment) {\n    return user.username === comment.author.username;\n}\n\n\nexport const commentResource = {\n    create: create,\n    getList: getList,\n    remove: remove,\n    isAuthor: isAuthor\n};","import React, {Fragment} from 'react';\nimport {Link} from \"react-router-dom\";\n\nimport config from '../config';\n\n\nconst CommentAuthor = (props) => {\n    return (\n        <Fragment>\n            <Link to={`/@${props.author.username}`} className=\"comment-author\">\n                <img src={props.author.image || config.DEFAULT_USER_IMAGE}\n                     className=\"comment-author-img\"\n                     alt={`${props.author.username}`}/>\n            </Link>\n            &nbsp;\n\n            <Link to={`/@${props.author.username}`}\n                  className=\"comment-author\">{props.author.username}\n            </Link>\n        </Fragment>\n    )\n};\n\nexport default CommentAuthor;","import {Component} from \"react\";\nimport {commentResource} from \"../api/comment\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\nimport React from \"react\";\nimport CommentAuthor from \"./CommentAuthor\";\n\n\nclass CommentEditor extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            comment: ''\n        };\n        this.handleInput = this.handleInput.bind(this);\n        this.postComment = this.postComment.bind(this);\n        this.resetInput = this.resetInput.bind(this);\n    }\n\n    handleInput(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    resetInput() {\n        this.setState({comment: ''});\n    }\n\n    postComment(event) {\n        event.preventDefault();\n\n        this.request = commentResource.create(this.props.articleSlug, this.state.comment);\n        this.request.promise\n            .then(() => {\n                this.resetInput();\n                this.props.onPostSuccess();\n            })\n            .catch(console.error);\n    }\n\n    componentWillUnmount() {\n        if (this.request) {\n            this.request.abort();\n        }\n    }\n\n    render() {\n        return (\n            <form className=\"card comment-form\">\n                <div className=\"card-block\">\n                    <textarea className=\"form-control\"\n                              placeholder=\"Write a comment...\"\n                              rows=\"3\"\n                              value={this.state.comment}\n                              name=\"comment\"\n                              onChange={this.handleInput}></textarea>\n                </div>\n\n                <div className=\"card-footer\">\n                    <CommentAuthor author={this.props.currentUser}/>\n\n                    <button className=\"btn btn-sm btn-primary\" onClick={this.postComment}>\n                        Post Comment\n                    </button>\n                </div>\n            </form>\n        );\n    }\n}\n\nexport default withAuthenticatedUser(CommentEditor);","import {Component} from \"react\";\nimport React from \"react\";\nimport CommentAuthor from \"./CommentAuthor\";\nimport {date} from '../services/representator';\n\n\nexport default class CommentViewer extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isReady: true\n        };\n\n        this.remove = this.remove.bind(this);\n    }\n\n    remove() {\n        this.setState({isReady: false});\n\n        this.request = this.props.onRemove(this.props.comment.id);\n        this.request.promise\n            .catch((error) => {\n                console.error(error);\n                if (error.name === 'AbortError') {\n                    return;\n                }\n\n                this.setState({isReady: true});\n            });\n    }\n\n    componentWillUnmount() {\n        if (this.request) {\n            this.request.abort();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"card\" key={this.props.comment.id}>\n                <div className=\"card-block\">\n                    <p className=\"card-text\">{this.props.comment.body}</p>\n                </div>\n\n                <div className=\"card-footer\">\n                    <CommentAuthor author={this.props.comment.author}/>\n\n                    <span className=\"date-posted\">{date.format(this.props.comment.createdAt)}</span>\n\n                    {\n                        this.props.isAuthor &&\n                        <span className=\"mod-options\">\n                            <i className=\"ion-trash-a\" onClick={this.remove}></i>\n                        </span>\n                    }\n                </div>\n            </div>\n        );\n    }\n}","import {Component} from \"react\";\nimport {commentResource} from \"../api/comment\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\nimport React from \"react\";\nimport CommentEditor from \"./CommentEditor\";\nimport CommentViewer from \"./CommentViewer\";\nimport {authenticationStatusEnum} from \"../api/user\";\n\n\nclass CommentList extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            comments: [],\n            isReady: false\n        };\n\n        this.removeComment = this.removeComment.bind(this);\n        this.isCommentAuthor = this.isCommentAuthor.bind(this);\n        this.getComments = this.getComments.bind(this);\n    }\n\n    getComments() {\n        this.setState({isReady: false});\n\n        this.request = commentResource.getList(this.props.articleSlug);\n        this.request.promise\n            .then((response) => {\n                this.setState({comments: response.comments, isReady: true});\n            })\n            .catch((error) => {\n                if (error.name === 'AbortError') {\n                    return;\n                }\n\n                this.setState({isReady: true});\n            });\n    }\n\n    removeComment(commentId) {\n        this.request = commentResource.remove(this.props.articleSlug, commentId);\n        this.request.promise\n            .then(this.getComments)\n            .catch(console.error);\n        return this.request;\n    }\n\n    isCommentAuthor(comment) {\n        return commentResource.isAuthor(this.props.currentUser, comment);\n    }\n\n    componentDidMount() {\n        this.getComments();\n    }\n\n    componentWillUnmount() {\n        this.request.abort();\n    }\n\n    render() {\n        return (\n            <div>\n                {\n                    !this.state.isReady &&\n                    <div>loading...</div>\n                }\n\n\n                {\n                    this.state.isReady && (this.props.authenticationStatus === authenticationStatusEnum.AUTHENTICATED) &&\n                    <CommentEditor\n                        articleSlug={this.props.articleSlug}\n                        onPostSuccess={this.getComments}\n                        author={this.props.currentUser}/>\n                }\n\n                {\n                    this.state.isReady &&\n                    this.state.comments.map((comment) => {\n                        return <CommentViewer comment={comment}\n                                              onRemove={this.removeComment}\n                                              isAuthor={this.isCommentAuthor(comment)}\n                                              key={comment.id}/>\n                        })\n                }\n            </div>\n        );\n    }\n}\n\nexport default withAuthenticatedUser(CommentList);\n","import React, {Fragment} from 'react';\nimport {Link} from \"react-router-dom\";\nimport {date} from '../services/representator';\n\n\nconst ArticleAuthor = (props) => {\n    return (\n            <Fragment>\n                <Link to={`/@${props.article.author.username}`}>\n                    <img src={props.article.author.image} alt={props.article.author.username}/>\n                </Link>\n\n                <div className=\"info\">\n                    <Link to={`/@${props.article.author.username}`} className=\"author\">\n                        {props.article.author.username}\n                    </Link>\n                    <span className=\"date\">{date.format(props.article.createdAt)}</span>\n                </div>\n            </Fragment>\n        );\n};\n\nexport default ArticleAuthor;","import {Component} from \"react\";\nimport {articleResource} from \"../api/article\";\nimport {Link} from \"react-router-dom\";\nimport marked from \"marked\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\nimport React from \"react\";\nimport CommentList from \"../components/CommentList\";\nimport {ArticleLikeButton} from \"../components/LikeButton\";\nimport {FollowUserButton} from \"../components/FollowButton\";\nimport ArticleAuthor from \"../components/ArticleAuthor\";\nimport {ArticleTags} from \"../components/TagList\";\nimport NotFound404 from \"../components/NotFound404\";\nimport withNavigation from \"../hoc/withNavigation\";\nimport {authenticationStatusEnum} from \"../api/user\";\n\n\nclass BaseArticleMeta extends Component {\n    constructor(props) {\n        super(props);\n\n        this.handleFollowClick = this.handleFollowClick.bind(this);\n        this.favorite = this.favorite.bind(this);\n        this.unfavorite = this.unfavorite.bind(this);\n        this.deleteArticle = this.deleteArticle.bind(this);\n        this.isAuthor = this.isAuthor.bind(this);\n    }\n\n    // change the favorite counter in place instead of re-fetching the article\n    favorite() {\n        const updatedArticle = Object.assign(\n            {},\n            this.props.article,\n            {favorited: true, favoritesCount: this.props.article.favoritesCount + 1}\n        );\n\n        this.props.onArticleChange(updatedArticle);\n    }\n\n    unfavorite() {\n        const updatedArticle = Object.assign(\n            {},\n            this.props.article,\n            {favorited: false, favoritesCount: this.props.article.favoritesCount - 1}\n        );\n\n        this.props.onArticleChange(updatedArticle);\n    }\n\n    handleFollowClick(isFollowing) {\n        const author = Object.assign({}, this.props.article.author, {following: isFollowing});\n        const updatedArticle = Object.assign({}, this.props.article);\n        updatedArticle.author = author;\n\n        this.props.onArticleChange(updatedArticle);\n    }\n\n    deleteArticle() {\n        this.request = articleResource.remove(this.props.match.params.slug);\n        this.request.promise\n            .then(() => {\n                this.props.navigation.go('/')\n            })\n            .catch(console.error);\n    }\n\n    isAuthor() {\n        return articleResource.isAuthor(this.props.article, this.props.currentUser);\n    }\n\n    componentWillUnmount() {\n        if (this.request) {\n            this.request.abort();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"article-meta\">\n                <ArticleAuthor article={this.props.article}/>\n\n                {\n                    this.isAuthor() &&\n                    <Link to={`/editor/${this.props.article.slug}`} className=\"btn btn-sm btn-outline-secondary\">\n                        <i className=\"ion-edit\"></i> Edit Article\n                    </Link>\n                }\n\n                &nbsp;&nbsp;\n                {\n                    this.isAuthor() &&\n                    <button onClick={this.deleteArticle} className=\"btn btn-sm btn-outline-danger\">\n                        <i className=\"ion-trash-a\"></i> Delete Article\n                    </button>\n                }\n\n                {\n                    !this.isAuthor() &&\n                    <FollowUserButton className=\"action-btn\"\n                                      profile={this.props.article.author}\n                                      onFollow={() => {this.handleFollowClick(true);}}\n                                      onUnfollow={() => {this.handleFollowClick(false);}}/>\n                }\n\n                &nbsp;&nbsp;\n                {\n                    !this.isAuthor() &&\n                    <ArticleLikeButton\n                        className=\"btn-sm\"\n                        articleSlug={this.props.article.slug}\n                        count={this.props.article.favoritesCount}\n                        isFavorited={this.props.article.favorited}\n                        onFavorite={this.favorite}\n                        onUnfavorite={this.unfavorite}>\n                    </ArticleLikeButton>\n                }\n            </div>\n        );\n    }\n}\n\nconst ArticleMeta = withNavigation(BaseArticleMeta);\n\n\nclass ArticleViewer extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isReady: false,\n            isArticleNotFound: false\n        };\n\n        this.updateArticle = this.updateArticle.bind(this);\n    }\n\n    updateArticle(article) {\n        this.setState({article: article});\n    }\n\n    componentDidMount() {\n        this.request = articleResource.get(this.props.match.params.slug);\n        this.request.promise\n            .then((response) => {\n                this.setState({article: response.article, isReady: true});\n            })\n            .catch((error) => {\n                if (error.name === 'AbortError') {\n                    return;\n                } else if (error.statusCode === 404) {\n                    this.setState({isArticleNotFound: true});\n                }\n\n                console.error(error);\n            });\n    }\n\n    componentWillUnmount() {\n        this.request.abort();\n    }\n\n    render() {\n        return (\n            <NotFound404 isShown={this.state.isArticleNotFound}>\n                {!this.state.isReady && <div>Loading...</div>}\n\n                {\n                    this.state.article &&\n                    <div className=\"article-page\">\n\n                        <div className=\"banner\">\n                            <div className=\"container\">\n\n                                <h1>{this.state.article.title}</h1>\n\n                                <ArticleMeta article={this.state.article}\n                                             onArticleChange={this.updateArticle}\n                                             currentUser={this.props.currentUser}/>\n                            </div>\n                        </div>\n\n                        <div className=\"container page\">\n\n                            <div className=\"row article-content\">\n                                <div className=\"col-md-12\">\n                                    <p dangerouslySetInnerHTML={{__html: marked(this.state.article.body, {sanitize: true})}}></p>\n                                </div>\n                            </div>\n\n                            <ArticleTags tags={this.state.article.tagList}/>\n\n                            <hr/>\n\n                            <div className=\"article-actions\">\n                                <ArticleMeta article={this.state.article}\n                                             onArticleChange={this.updateArticle}\n                                             currentUser={this.props.currentUser}/>\n                            </div>\n\n                            {\n                                (this.props.authenticationStatus !== authenticationStatusEnum.AUTHENTICATED) &&\n                                <div className=\"row\">\n                                    <div className=\"col-xs-12 col-md-8 offset-md-2\">\n                                        <p>\n                                            <Link to={{pathname: '/login', state: {from: this.props.location}}}>\n                                                Sign in\n                                            </Link>\n\n                                            &nbsp; or &nbsp;\n\n                                            <Link to={{pathname: '/register', state: {from: this.props.location}}}>\n                                                sign up\n                                            </Link> to add comments on this article.\n                                        </p>\n                                    </div>\n                                </div>\n                            }\n\n                            <div className=\"row\">\n                                <div className=\"col-xs-12 col-md-8 offset-md-2\">\n                                    <CommentList articleSlug={this.state.article.slug}/>\n                                </div>\n                            </div>\n\n                        </div>\n\n                    </div>\n                }\n            </NotFound404>\n        );\n    }\n}\n\nexport default withNavigation(withAuthenticatedUser(ArticleViewer));","import {Component} from \"react\";\nimport React from \"react\";\nimport TagList from \"./TagList\";\n\n\nexport default class ArticleForm extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            article: {\n                title: this.props.title || '',\n                description: this.props.description || [],\n                body: this.props.body || '',\n                tagList: this.props.tagList || []\n            }\n        };\n\n        this.onSubmit = this.onSubmit.bind(this);\n        this.handleInput = this.handleInput.bind(this);\n        this.handleTagInput = this.handleTagInput.bind(this);\n        this.getSanitizedTagList = this.getSanitizedTagList.bind(this);\n        this.removeTag = this.removeTag.bind(this);\n    }\n\n    onSubmit(event) {\n        event.preventDefault();\n\n        this.props.onSubmit({...this.state.article, tagList: this.getSanitizedTagList()});\n    }\n\n    handleInput(event) {\n        const article = {...this.state.article, [event.target.name]: event.target.value};\n        this.setState({article: article});\n    }\n\n    handleTagInput(event) {\n        const tags = event.target.value.split(' ');\n        this.setState({article: Object.assign({}, this.state.article, {[event.target.name]: tags})});\n    }\n\n    getSanitizedTagList() {\n        return this.state.article.tagList.filter(tag => tag.length > 0);\n    }\n\n    removeTag(tagToRemove) {\n        const index = this.state.article.tagList.findIndex(tag => tag === tagToRemove);\n        const updatedTagList = [...this.state.article.tagList];\n        updatedTagList.splice(index, 1);\n\n        this.setState({article: Object.assign({}, this.state.article, {tagList: updatedTagList})});\n    }\n\n    render() {\n        return (\n            <div className=\"editor-page\">\n                <div className=\"container page\">\n                    <div className=\"row\">\n\n                        <div className=\"col-md-10 offset-md-1 col-xs-12\">\n                            <form>\n                                <fieldset>\n                                    <fieldset className=\"form-group\">\n                                        <input type=\"text\"\n                                               className=\"form-control form-control-lg\"\n                                               placeholder=\"Article Title\"\n                                               value={this.state.article.title}\n                                               name=\"title\"\n                                               onChange={this.handleInput}/>\n                                    </fieldset>\n\n                                    <fieldset className=\"form-group\">\n                                        <input type=\"text\"\n                                               className=\"form-control\"\n                                               placeholder=\"What's this article about?\"\n                                               value={this.state.article.description}\n                                               name=\"description\"\n                                               onChange={this.handleInput}/>\n                                    </fieldset>\n\n                                    <fieldset className=\"form-group\">\n                                        <textarea className=\"form-control\"\n                                                  rows=\"8\"\n                                                  placeholder=\"Write your article (in markdown)\"\n                                                  value={this.state.article.body}\n                                                  name=\"body\"\n                                                  onChange={this.handleInput}></textarea>\n                                    </fieldset>\n\n                                    <fieldset className=\"form-group\">\n                                        <input type=\"text\"\n                                               className=\"form-control\"\n                                               placeholder=\"Enter tags separated by space\"\n                                               value={this.state.article.tagList.join(' ')}\n                                               name=\"tagList\"\n                                               onChange={this.handleTagInput}/>\n                                        {<TagList tags={this.getSanitizedTagList()} onTagRemove={this.removeTag}/>}\n                                    </fieldset>\n\n                                    <button className=\"btn btn-lg pull-xs-right btn-primary\"\n                                            type=\"button\"\n                                            onClick={this.onSubmit}>\n                                        Publish Article\n                                    </button>\n                                </fieldset>\n                            </form>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}","import {Component, Fragment} from \"react\";\nimport {articleResource} from \"../api/article\";\nimport React from \"react\";\nimport ArticleForm from \"../components/ArticleForm\";\nimport withAuthorizationCheck from \"../hoc/withAuthorizationCheck\";\n\n\nclass ArticleEditor extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            article: {...this.props.resolved.article}\n        };\n        this.saveChanges = this.saveChanges.bind(this);\n    }\n\n    saveChanges(article) {\n        this.articleRequest = articleResource.update(this.state.article.slug, article);\n        this.articleRequest.promise\n            .then((response) => {\n                this.props.navigation.go(`/article/${response.article.slug}`);\n            })\n            .catch(console.error);\n    }\n\n    componentWillUnmount() {\n        if (this.articleRequest) {\n            this.articleRequest.abort();\n        }\n    }\n\n    render() {\n        return (\n            <Fragment>\n                {this.state.article &&\n                <ArticleForm\n                    title={this.state.article.title}\n                    body={this.state.article.body}\n                    description={this.state.article.description}\n                    tagList={this.state.article.tagList}\n                    onSubmit={this.saveChanges}/>}\n            </Fragment>\n        )\n    }\n}\n\nfunction getArticle(match) {\n    return articleResource.get(match.params.slug);\n}\n\nfunction hasPermission(currentUser, response) {\n    return currentUser.username === response.article.author.username;\n}\n\nexport default withAuthorizationCheck(ArticleEditor, getArticle, hasPermission);","import {Component} from \"react\";\nimport React from \"react\";\nimport withAuthenticatedUser from \"./withAuthenticatedUser\";\nimport {ErrorViewer} from \"../components/ErrorViewer\";\nimport NotFound404 from \"../components/NotFound404\";\nimport withNavigation from \"./withNavigation\";\n\n\n\nconst withAuthorizationCheck = (WrappedComponent, resolveFn, hasPermissionFn) => {\n    class AuthorizedOnly extends Component {\n        constructor(props) {\n            super(props);\n\n            this.state = {\n                isAuthorized: false,\n                isReady: false,\n                isErrorHappened: false,\n                resolved: {},\n                isNotFoundError: false\n            }\n        }\n\n        componentDidMount() {\n            this.request = resolveFn(this.props.match);\n            this.request.promise\n                .then((response) => {\n                    this.setState({\n                        isAuthorized: hasPermissionFn(this.props.currentUser, response),\n                        isReady: true,\n                        resolved: response\n                    })\n                })\n                .catch((error) => {\n                    if (error.name === 'AbortError') {\n                        return;\n                    } else if (error.statusCode === 404) {\n                        this.setState({isNotFoundError: true});\n                    } else {\n                        this.setState({isErrorHappened: true, error: error});\n                    }\n                })\n        }\n\n        componentWillUnmount() {\n            if (this.request) {\n                this.request.abort();\n            }\n        }\n\n        render() {\n            return (\n                <NotFound404 isShown={this.state.isNotFoundError}>\n                    {/*Authorized*/}\n                    {this.state.isReady && this.state.isAuthorized &&\n                        <WrappedComponent {...this.props} resolved={this.state.resolved}/>\n                    }\n\n                    {/*Not authorized*/}\n                    {this.state.isReady && !this.state.isAuthorized &&\n                        <div className=\"container page\">\n                            <div className=\"row\">\n                                <div className=\"col-md-10 offset-md-1 col-xs-12\">\n                                    <div className=\"alert alert-warning\" role=\"alert\">\n                                        Not Authorized\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    }\n\n                    {/*Unable to retrieve the data*/}\n                    {this.state.isReady && this.state.isErrorHappened &&\n                        <div className=\"container page\">\n                            <div className=\"row\">\n                                <div className=\"col-md-10 offset-md-1 col-xs-12\">\n                                    An error occurred:\n                                    <div className=\"alert alert-danger\" role=\"alert\">\n                                        <ErrorViewer errors={this.state.errors}/>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </NotFound404>\n            );\n        }\n    }\n\n    return withNavigation(withAuthenticatedUser(AuthorizedOnly))\n};\n\nexport default withAuthorizationCheck;","import {Component} from \"react\";\nimport {articleResource} from \"../api/article\";\nimport React from \"react\";\nimport ArticleForm from \"../components/ArticleForm\";\nimport withNavigation from \"../hoc/withNavigation\";\n\n\nclass ArticleCreator extends Component {\n    constructor(props) {\n        super(props);\n\n        this.create = this.create.bind(this);\n    }\n\n    create(article) {\n        this.request = articleResource.create(article);\n        this.request.promise\n            .then((response) => {\n                this.props.navigation.go(`/article/${response.article.slug}`)\n            })\n            .catch(console.error);\n    }\n\n    componentWillUnmount() {\n        if (this.request) {\n            this.request.abort();\n        }\n    }\n\n    render() {\n        return (\n            <ArticleForm onSubmit={this.create}/>\n        );\n    }\n}\n\nexport default withNavigation(ArticleCreator);","import React from 'react';\nimport {Link} from \"react-router-dom\";\n\n\nexport const Footer = () => {\n    return (\n        <footer>\n            <div className=\"container\">\n                <Link to=\"/\" className=\"logo-font\">conduit</Link>\n\n                <span className=\"attribution\">\n                    An interactive learning project from\n                    <a href=\"https://thinkster.io\">Thinkster</a>.\n                    Code &amp; design licensed under MIT.\n                </span>\n            </div>\n        </footer>\n    );\n};\n","import {Component, Fragment} from \"react\";\nimport {authenticationStatusEnum} from \"../api/user\";\nimport {Redirect, Route} from \"react-router-dom\";\nimport withAuthenticatedUser from \"../hoc/withAuthenticatedUser\";\nimport React from \"react\";\n\n\nclass ProtectedRoute extends Component {\n    constructor(props) {\n        super(props);\n\n        this.isAuthenticatedUser = this.isAuthenticatedUser.bind(this);\n        this.isAnonymousUser = this.isAnonymousUser.bind(this);\n        this.isUserLoading = this.isUserLoading.bind(this);\n    }\n\n    isUserLoading() {\n        return this.props.authenticationStatus === authenticationStatusEnum.IN_PROGRESS;\n    }\n\n    isAuthenticatedUser() {\n        return this.props.authenticationStatus === authenticationStatusEnum.AUTHENTICATED;\n    }\n\n    isAnonymousUser() {\n        return this.props.authenticationStatus === authenticationStatusEnum.NOT_AUTHENTICATED;\n    }\n\n    render() {\n        const {component: Component, ...rest} = this.props;\n\n        return (\n            <Fragment>\n                {\n                    this.isUserLoading() &&\n                    <span>Route is loading...</span>\n                }\n\n                <Route {...rest}\n                   render={(props) => {\n                       return <Fragment>\n                           {\n                               this.isAuthenticatedUser() &&\n                               <Component {...props}/>\n                           }\n\n                           {\n                               this.isAnonymousUser() &&\n                               <Redirect to={{pathname: \"/login\", state:{from: props.location}}}/>\n                           }\n                       </Fragment>\n                   }}/>\n            </Fragment>\n        );\n    }\n}\nProtectedRoute = withAuthenticatedUser(ProtectedRoute);\n\nexport default ProtectedRoute;","import React, {Component, Fragment} from 'react';\nimport './App.css';\nimport {BrowserRouter as Router, Route, Switch} from \"react-router-dom\";\nimport Registration from \"./pages/Registration\";\nimport LogIn from './pages/LogIn';\n\nimport {jwt} from './services/jwt';\nimport {addRequestInterceptor} from \"./services/request\";\nimport user from './api/user';\nimport Navigation from \"./components/Navigation\";\nimport ProfileSettings from \"./pages/ProfileSettings\";\nimport Home from \"./pages/Home\";\nimport UserProfile from \"./pages/UserProfile\";\nimport ArticleViewer from \"./pages/ArticleViewer\";\nimport ArticleEditor from \"./pages/ArticleEditor\";\nimport ArticleCreator from \"./pages/ArticleCreator\";\nimport {Footer} from \"./components/Footer\";\nimport withAuthenticatedUser from \"./hoc/withAuthenticatedUser\";\nimport ProtectedRoute from \"./components/ProtectedRoute\";\n\n\naddRequestInterceptor((url, options) => {\n    const token = jwt.get();\n    if (token) {\n        options.headers['Authorization'] = `Token ${token}`;\n    }\n\n    return [url, options];\n});\n\nclass App extends Component {\n    componentDidMount() {\n        if (jwt.isSet()) {\n            user.getCurrentUser();\n        }\n    }\n\n    render() {\n        return (\n            <Fragment>\n                <Router>\n                    <Fragment>\n                        <Navigation/>\n\n                        <Switch>\n                            <Route path=\"/\" exact component={Home}/>\n                            <Route path=\"/register\" component={Registration}/>\n                            <Route path=\"/login\" component={LogIn}/>\n                            <Route path=\"/@:user\" component={UserProfile}/>\n                            <ProtectedRoute path=\"/editor/:slug\" component={ArticleEditor}/>\n                            <ProtectedRoute path=\"/editor\" component={ArticleCreator}/>\n                            <Route path=\"/article/:slug\" component={ArticleViewer}/>\n                            <ProtectedRoute path=\"/settings\" component={ProfileSettings}/>\n                        </Switch>\n\n                        <Footer/>\n                    </Fragment>\n                </Router>\n            </Fragment>\n        );\n    }\n}\n\nexport default withAuthenticatedUser(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}